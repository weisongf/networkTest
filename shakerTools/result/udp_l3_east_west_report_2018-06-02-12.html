<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
<head profile="http://gmpg.org/xfn/11">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>

  <title>Shaker | The distributed data-plane testing tool for OpenStack</title>

  <!-- LIBS -->

  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/js/bootstrap.js"></script>
  <script type="text/javascript"
          src="https://cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.1/handlebars.min.js"></script>
  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/3.2.7/js-yaml.min.js"></script>
  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.js"></script>

  <!-- STYLES -->

  <link rel="stylesheet"
        href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.4/simplex/bootstrap.min.css">
  <link rel=stylesheet type=text/css
        href="https://cdn.datatables.net/1.10.2/css/jquery.dataTables.min.css">
  <link rel=stylesheet type=text/css
        href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.css">
  <link rel='stylesheet' type='text/css'
        href='http://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic&subset=latin,cyrillic'>

  <script type="application/javascript">
    var report = {"scenarios": {"OpenStack L3 East-West UDP": {"file_name": "/root/shaker/lib/python2.7/site-packages/shaker/scenarios/openstack/udp_l3_east_west.yaml", "deployment": {"accommodation": ["pair", "single_room"], "template": "l3_east_west.hot"}, "execution": {"tests": [{"class": "iperf3", "udp": true, "datagram_size": 32, "bandwidth": "1000M", "title": "UDP"}], "progression": "quadratic"}, "description": "In this scenario Shaker launches pairs of instances, each instance on its own compute node. Instances are connected to one of 2 tenant networks, which plugged into single router. The traffic goes from one network to the other (L3 east-west). The load is generated by UDP traffic.", "title": "OpenStack L3 East-West UDP"}}, "records": {"536dd9f4-c77e-4c1d-8670-a4d697edfcf6": {"status": "ok", "node": "cmp-003", "finish": 1527941589.257145, "stats": {"loss": {"avg": 94.3492, "unit": "%"}, "jitter": {"avg": 0.05148, "unit": "ms"}, "packets": {"max": 372303, "avg": 213339, "unit": "pps", "min": 147262}}, "verbose": "end:\n  cpu_utilization_percent:\n    host_system: 48.6597\n    host_total: 60.4244\n    host_user: 11.7654\n    remote_system: 4.14129\n    remote_total: 4.72385\n    remote_user: 0.581752\n  streams:\n  - udp:\n      bits_per_second: 54614800.0\n      bytes: 409611712\n      end: 60.0001\n      jitter_ms: 0.05148\n      lost_packets: 12076953\n      lost_percent: 94.3492\n      packets: 12800267\n      seconds: 60.0001\n      socket: 4\n      start: 0\n  sum:\n    bits_per_second: 54614800.0\n    bytes: 409611712\n    end: 60.0001\n    jitter_ms: 0.05148\n    lost_packets: 12076953\n    lost_percent: 94.3492\n    packets: 12800267\n    seconds: 60.0001\n    start: 0\nstart:\n  connected:\n  - local_host: 11.1.0.10\n    local_port: 50035\n    remote_host: 11.2.0.10\n    remote_port: 5201\n    socket: 4\n  connecting_to:\n    host: 11.2.0.10\n    port: 5201\n  cookie: shaker-sdfzio-master-5.1527941527.86\n  system_info: 'Linux shaker-sdfzio-master-5 4.4.0-127-generic #153-Ubuntu SMP Sat\n    May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n    '\n  test_start:\n    blksize: 32\n    blocks: 0\n    bytes: 0\n    duration: 60\n    num_streams: 1\n    omit: 0\n    protocol: UDP\n    reverse: 0\n  timestamp:\n    time: Sat, 02 Jun 2018 12:12:07 GMT\n    timesecs: 1527941527\n  version: iperf 3.0.11\n", "scenario": "OpenStack L3 East-West UDP", "stderr": "", "schedule": 1527941527.854541, "agent": "shaker_sdfzio_master_5", "start": 1527941527.862999, "meta": [["time", "s"], ["packets", "pps"]], "command": {"type": "program", "data": "iperf3 --client 11.2.0.10 --format m --udp --len 32 --bandwidth 1000M --time 60 --parallel 1 --interval 1 --json"}, "concurrency": 6, "executor": "iperf3", "test": "UDP", "type": "agent", "id": "536dd9f4-c77e-4c1d-8670-a4d697edfcf6", "samples": [[1.0, 166343], [2.0, 166208], [3.0, 167224], [4.0, 168203], [5.0, 168548], [6.0, 168847], [7.0, 168379], [8.0, 169048], [9.0, 166313], [10.0, 162094], [11.0, 160055], [12.0, 159872], [13.0, 158362], [14.0, 156081], [15.0, 153380], [16.0, 154886], [17.0, 155317], [18.0, 153519], [19.0, 151999], [20.0, 152694], [21.0, 152637], [22.0, 155075], [23.0, 156900], [24.0, 157672], [25.0, 156571], [26.0, 157549], [27.0, 155985], [28.0, 155906], [29.0, 161248], [30.0, 163378], [31.0, 161612], [32.0, 151405], [33.0, 147262], [34.0, 150359], [35.0, 154470], [36.0, 316373], [37.0, 371396], [38.0, 372303], [39.0, 371202], [40.0, 370631], [41.0, 370664], [42.0, 370555], [43.0, 371031], [44.0, 369866], [45.0, 370254], [46.0, 370303], [47.0, 370590], [48.0, 370500], [49.0, 370478], [50.0, 369896], [51.0, 221864], [52.0, 170841], [53.0, 170833], [54.0, 170693], [55.0, 171179], [56.0, 168381], [57.0, 169108], [58.0, 163690], [59.0, 160688], [60.0, 161646]]}, "76a393f4-4840-4001-b89b-29b99d7d3e68": {"meta": [["concurrency", ""], ["loss", "%"], ["jitter", "ms"], ["packets", "pps"]], "scenario": "OpenStack L3 East-West UDP", "test": "UDP", "type": "test", "chart": [["concurrency", 1, 3, 6], ["loss", 3.18556, 57.192049999999995, 85.56336000000002], ["jitter", 0.00328212, 0.02601266, 0.036713592], ["packets", 150484, 156451, 163756]], "id": "76a393f4-4840-4001-b89b-29b99d7d3e68"}, "d51c12f0-6522-44bd-9713-1dd9250110cf": {"status": "ok", "node": "cmp-002", "finish": 1527941588.92285, "stats": {"loss": {"avg": 84.0475, "unit": "%"}, "jitter": {"avg": 0.02653, "unit": "ms"}, "packets": {"max": 368493, "avg": 153556, "unit": "pps", "min": 133981}}, "verbose": "end:\n  cpu_utilization_percent:\n    host_system: 35.4192\n    host_total: 44.0596\n    host_user: 8.64175\n    remote_system: 0.176552\n    remote_total: 0.20122\n    remote_user: 0.0246454\n  streams:\n  - udp:\n      bits_per_second: 39310400.0\n      bytes: 294828736\n      end: 60.0001\n      jitter_ms: 0.02653\n      lost_packets: 7743588\n      lost_percent: 84.0475\n      packets: 9213345\n      seconds: 60.0001\n      socket: 4\n      start: 0\n  sum:\n    bits_per_second: 39310400.0\n    bytes: 294828736\n    end: 60.0001\n    jitter_ms: 0.02653\n    lost_packets: 7743588\n    lost_percent: 84.0475\n    packets: 9213345\n    seconds: 60.0001\n    start: 0\nstart:\n  connected:\n  - local_host: 11.1.0.11\n    local_port: 59175\n    remote_host: 11.2.0.13\n    remote_port: 5201\n    socket: 4\n  connecting_to:\n    host: 11.2.0.13\n    port: 5201\n  cookie: shaker-sdfzio-master-1.1527941527.88\n  system_info: 'Linux shaker-sdfzio-master-1 4.4.0-127-generic #153-Ubuntu SMP Sat\n    May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n    '\n  test_start:\n    blksize: 32\n    blocks: 0\n    bytes: 0\n    duration: 60\n    num_streams: 1\n    omit: 0\n    protocol: UDP\n    reverse: 0\n  timestamp:\n    time: Sat, 02 Jun 2018 12:12:07 GMT\n    timesecs: 1527941527\n  version: iperf 3.0.11\n", "scenario": "OpenStack L3 East-West UDP", "stderr": "", "schedule": 1527941527.854541, "agent": "shaker_sdfzio_master_1", "start": 1527941527.873881, "meta": [["time", "s"], ["packets", "pps"]], "command": {"type": "program", "data": "iperf3 --client 11.2.0.13 --format m --udp --len 32 --bandwidth 1000M --time 60 --parallel 1 --interval 1 --json"}, "concurrency": 6, "executor": "iperf3", "test": "UDP", "type": "agent", "id": "d51c12f0-6522-44bd-9713-1dd9250110cf", "samples": [[1.0, 153509], [2.0, 149429], [3.0, 146508], [4.0, 148055], [5.0, 149245], [6.0, 145493], [7.0, 145636], [8.0, 145941], [9.0, 144111], [10.0, 144373], [11.0, 145934], [12.0, 149972], [13.0, 147545], [14.0, 147103], [15.0, 143042], [16.0, 141002], [17.0, 138988], [18.0, 142799], [19.0, 135710], [20.0, 137406], [21.0, 135469], [22.0, 134788], [23.0, 135916], [24.0, 134662], [25.0, 136209], [26.0, 145694], [27.0, 136078], [28.0, 148415], [29.0, 143779], [30.0, 139108], [31.0, 141632], [32.0, 151871], [33.0, 139331], [34.0, 139009], [35.0, 137619], [36.0, 141145], [37.0, 144634], [38.0, 140485], [39.0, 145066], [40.0, 144573], [41.0, 141010], [42.0, 201691], [43.0, 368416], [44.0, 368493], [45.0, 307500], [46.0, 136412], [47.0, 133981], [48.0, 134822], [49.0, 135285], [50.0, 136893], [51.0, 140473], [52.0, 140276], [53.0, 139939], [54.0, 139147], [55.0, 142650], [56.0, 148744], [57.0, 146074], [58.0, 144766], [59.0, 145004], [60.0, 144538]]}, "4f98e7a8-584d-4c5c-9863-24ba69f34daa": {"stats": {"loss": {"avg": 3.18556, "unit": "%"}, "jitter": {"avg": 0.00328212, "unit": "ms"}, "packets": {"max": 157460, "avg": 150484, "unit": "pps", "min": 142139}}, "scenario": "OpenStack L3 East-West UDP", "concurrency": 1, "test": "UDP", "type": "concurrency", "id": "4f98e7a8-584d-4c5c-9863-24ba69f34daa", "node_chart": [["x", "cmp-004"], ["Avg loss, %", 3.18556], ["Avg jitter, ms", 0.00328212], ["Avg packets, pps", 150484], ["Max packets, pps", 157460], ["Min packets, pps", 142139]]}, "47d03544-515a-418f-871a-23c84659427a": {"status": "lost", "node": "cmp-005", "stats": {}, "scenario": "OpenStack L3 East-West UDP", "schedule": 1527941527.854541, "agent": "shaker_sdfzio_master_2", "command": {"type": "program", "data": "iperf3 --client 11.2.0.8 --format m --udp --len 32 --bandwidth 1000M --time 60 --parallel 1 --interval 1 --json"}, "concurrency": 6, "executor": "iperf3", "test": "UDP", "type": "agent", "id": "47d03544-515a-418f-871a-23c84659427a"}, "f469934e-01d5-432e-9da5-799c430b35ba": {"status": "ok", "node": "cmp-001", "finish": 1527941591.272171, "stats": {"loss": {"avg": 80.5092, "unit": "%"}, "jitter": {"avg": 0.00515946, "unit": "ms"}, "packets": {"max": 373501, "avg": 153735, "unit": "pps", "min": 137543}}, "verbose": "end:\n  cpu_utilization_percent:\n    host_system: 38.0514\n    host_total: 47.0903\n    host_user: 9.04059\n    remote_system: 5.46904\n    remote_total: 6.43892\n    remote_user: 0.968034\n  streams:\n  - udp:\n      bits_per_second: 39356100.0\n      bytes: 295171392\n      end: 60.0001\n      jitter_ms: 0.00515946\n      lost_packets: 7426254\n      lost_percent: 80.5092\n      packets: 9224102\n      seconds: 60.0001\n      socket: 4\n      start: 0\n  sum:\n    bits_per_second: 39356100.0\n    bytes: 295171392\n    end: 60.0001\n    jitter_ms: 0.00515946\n    lost_packets: 7426254\n    lost_percent: 80.5092\n    packets: 9224102\n    seconds: 60.0001\n    start: 0\nstart:\n  connected:\n  - local_host: 11.1.0.13\n    local_port: 47713\n    remote_host: 11.2.0.16\n    remote_port: 5201\n    socket: 4\n  connecting_to:\n    host: 11.2.0.16\n    port: 5201\n  cookie: shaker-sdfzio-master-0.1527941527.86\n  system_info: 'Linux shaker-sdfzio-master-0 4.4.0-127-generic #153-Ubuntu SMP Sat\n    May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n    '\n  test_start:\n    blksize: 32\n    blocks: 0\n    bytes: 0\n    duration: 60\n    num_streams: 1\n    omit: 0\n    protocol: UDP\n    reverse: 0\n  timestamp:\n    time: Sat, 02 Jun 2018 12:12:07 GMT\n    timesecs: 1527941527\n  version: iperf 3.0.11\n", "scenario": "OpenStack L3 East-West UDP", "stderr": "", "schedule": 1527941527.854541, "agent": "shaker_sdfzio_master_0", "start": 1527941527.86468, "meta": [["time", "s"], ["packets", "pps"]], "command": {"type": "program", "data": "iperf3 --client 11.2.0.16 --format m --udp --len 32 --bandwidth 1000M --time 60 --parallel 1 --interval 1 --json"}, "concurrency": 6, "executor": "iperf3", "test": "UDP", "type": "agent", "id": "f469934e-01d5-432e-9da5-799c430b35ba", "samples": [[1.0, 152339], [2.0, 151945], [3.0, 149321], [4.0, 150830], [5.0, 149669], [6.0, 149122], [7.0, 148460], [8.0, 147897], [9.0, 147325], [10.0, 144271], [11.0, 142962], [12.0, 140887], [13.0, 141653], [14.0, 142065], [15.0, 142296], [16.0, 140484], [17.0, 139930], [18.0, 139328], [19.0, 137543], [20.0, 139178], [21.0, 145255], [22.0, 146015], [23.0, 146748], [24.0, 145968], [25.0, 149601], [26.0, 150263], [27.0, 149882], [28.0, 151372], [29.0, 150648], [30.0, 146953], [31.0, 146074], [32.0, 145413], [33.0, 373501], [34.0, 372926], [35.0, 147334], [36.0, 145113], [37.0, 142442], [38.0, 141616], [39.0, 142373], [40.0, 142959], [41.0, 142963], [42.0, 142006], [43.0, 144125], [44.0, 145659], [45.0, 148668], [46.0, 149031], [47.0, 149400], [48.0, 151334], [49.0, 151402], [50.0, 149588], [51.0, 149417], [52.0, 149433], [53.0, 149483], [54.0, 148669], [55.0, 145103], [56.0, 143170], [57.0, 143077], [58.0, 145722], [59.0, 146951], [60.0, 148944]]}, "e7c0cb01-d9b0-46db-a146-72864804791e": {"status": "ok", "node": "cmp-003", "finish": 1527941507.648585, "stats": {"loss": {"avg": 57.2204, "unit": "%"}, "jitter": {"avg": 0.0474204, "unit": "ms"}, "packets": {"max": 170085, "avg": 162275, "unit": "pps", "min": 148856}}, "verbose": "end:\n  cpu_utilization_percent:\n    host_system: 38.1043\n    host_total: 47.2875\n    host_user: 9.18818\n    remote_system: 0.41597\n    remote_total: 0.482856\n    remote_user: 0.0668364\n  streams:\n  - udp:\n      bits_per_second: 41542400.0\n      bytes: 311568160\n      end: 60\n      jitter_ms: 0.0474204\n      lost_packets: 5571271\n      lost_percent: 57.2204\n      packets: 9736505\n      seconds: 60\n      socket: 4\n      start: 0\n  sum:\n    bits_per_second: 41542400.0\n    bytes: 311568160\n    end: 60\n    jitter_ms: 0.0474204\n    lost_packets: 5571271\n    lost_percent: 57.2204\n    packets: 9736505\n    seconds: 60\n    start: 0\nstart:\n  connected:\n  - local_host: 11.1.0.10\n    local_port: 39564\n    remote_host: 11.2.0.10\n    remote_port: 5201\n    socket: 4\n  connecting_to:\n    host: 11.2.0.10\n    port: 5201\n  cookie: shaker-sdfzio-master-5.1527941447.47\n  system_info: 'Linux shaker-sdfzio-master-5 4.4.0-127-generic #153-Ubuntu SMP Sat\n    May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n    '\n  test_start:\n    blksize: 32\n    blocks: 0\n    bytes: 0\n    duration: 60\n    num_streams: 1\n    omit: 0\n    protocol: UDP\n    reverse: 0\n  timestamp:\n    time: Sat, 02 Jun 2018 12:10:47 GMT\n    timesecs: 1527941447\n  version: iperf 3.0.11\n", "scenario": "OpenStack L3 East-West UDP", "stderr": "", "schedule": 1527941447.460338, "agent": "shaker_sdfzio_master_5", "start": 1527941447.47054, "meta": [["time", "s"], ["packets", "pps"]], "command": {"type": "program", "data": "iperf3 --client 11.2.0.10 --format m --udp --len 32 --bandwidth 1000M --time 60 --parallel 1 --interval 1 --json"}, "concurrency": 3, "executor": "iperf3", "test": "UDP", "type": "agent", "id": "e7c0cb01-d9b0-46db-a146-72864804791e", "samples": [[1.0, 165985], [2.0, 168532], [3.0, 168250], [4.0, 168044], [5.0, 163092], [6.0, 159803], [7.0, 159542], [8.0, 160101], [9.0, 159740], [10.0, 160933], [11.0, 160844], [12.0, 159653], [13.0, 161605], [14.0, 161513], [15.0, 161617], [16.0, 165517], [17.0, 166072], [18.0, 165936], [19.0, 165663], [20.0, 166497], [21.0, 166770], [22.0, 162904], [23.0, 161504], [24.0, 161071], [25.0, 164094], [26.0, 162734], [27.0, 163373], [28.0, 163011], [29.0, 164151], [30.0, 164063], [31.0, 162935], [32.0, 164519], [33.0, 166266], [34.0, 164998], [35.0, 166993], [36.0, 167631], [37.0, 157295], [38.0, 157926], [39.0, 166989], [40.0, 166067], [41.0, 168246], [42.0, 152539], [43.0, 149578], [44.0, 149005], [45.0, 150064], [46.0, 150787], [47.0, 150357], [48.0, 148856], [49.0, 153886], [50.0, 161819], [51.0, 162033], [52.0, 161437], [53.0, 166329], [54.0, 165662], [55.0, 163350], [56.0, 163321], [57.0, 165163], [58.0, 170085], [59.0, 169984], [60.0, 169771]]}, "63bf73a9-c7d1-4b1a-80e3-bd858692058a": {"status": "ok", "node": "cmp-006", "finish": 1527941588.507628, "stats": {"loss": {"avg": 83.678, "unit": "%"}, "jitter": {"avg": 0.0262761, "unit": "ms"}, "packets": {"max": 216620, "avg": 153041, "unit": "pps", "min": 139471}}, "verbose": "end:\n  cpu_utilization_percent:\n    host_system: 35.8154\n    host_total: 44.3897\n    host_user: 8.5744\n    remote_system: 0.174535\n    remote_total: 0.194654\n    remote_user: 0.0200715\n  streams:\n  - udp:\n      bits_per_second: 39178600.0\n      bytes: 293840256\n      end: 60.0001\n      jitter_ms: 0.0262761\n      lost_packets: 7683667\n      lost_percent: 83.678\n      packets: 9182426\n      seconds: 60.0001\n      socket: 4\n      start: 0\n  sum:\n    bits_per_second: 39178600.0\n    bytes: 293840256\n    end: 60.0001\n    jitter_ms: 0.0262761\n    lost_packets: 7683667\n    lost_percent: 83.678\n    packets: 9182426\n    seconds: 60.0001\n    start: 0\nstart:\n  connected:\n  - local_host: 11.1.0.9\n    local_port: 40940\n    remote_host: 11.2.0.6\n    remote_port: 5201\n    socket: 4\n  connecting_to:\n    host: 11.2.0.6\n    port: 5201\n  cookie: shaker-sdfzio-master-3.1527941527.87\n  system_info: 'Linux shaker-sdfzio-master-3 4.4.0-127-generic #153-Ubuntu SMP Sat\n    May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n    '\n  test_start:\n    blksize: 32\n    blocks: 0\n    bytes: 0\n    duration: 60\n    num_streams: 1\n    omit: 0\n    protocol: UDP\n    reverse: 0\n  timestamp:\n    time: Sat, 02 Jun 2018 12:12:07 GMT\n    timesecs: 1527941527\n  version: iperf 3.0.11\n", "scenario": "OpenStack L3 East-West UDP", "stderr": "", "schedule": 1527941527.854541, "agent": "shaker_sdfzio_master_3", "start": 1527941527.872806, "meta": [["time", "s"], ["packets", "pps"]], "command": {"type": "program", "data": "iperf3 --client 11.2.0.6 --format m --udp --len 32 --bandwidth 1000M --time 60 --parallel 1 --interval 1 --json"}, "concurrency": 6, "executor": "iperf3", "test": "UDP", "type": "agent", "id": "63bf73a9-c7d1-4b1a-80e3-bd858692058a", "samples": [[1.0, 161636], [2.0, 165618], [3.0, 165669], [4.0, 165717], [5.0, 165070], [6.0, 165722], [7.0, 162289], [8.0, 158606], [9.0, 149199], [10.0, 149021], [11.0, 150557], [12.0, 151044], [13.0, 151299], [14.0, 151412], [15.0, 152140], [16.0, 143676], [17.0, 143594], [18.0, 143151], [19.0, 139688], [20.0, 139916], [21.0, 139937], [22.0, 139501], [23.0, 149817], [24.0, 143828], [25.0, 139471], [26.0, 149169], [27.0, 153383], [28.0, 155937], [29.0, 153205], [30.0, 146829], [31.0, 148551], [32.0, 157014], [33.0, 145620], [34.0, 144943], [35.0, 141561], [36.0, 140479], [37.0, 144533], [38.0, 142558], [39.0, 143428], [40.0, 143426], [41.0, 143293], [42.0, 147279], [43.0, 141980], [44.0, 149528], [45.0, 148400], [46.0, 158130], [47.0, 149430], [48.0, 145870], [49.0, 178692], [50.0, 216620], [51.0, 200732], [52.0, 161907], [53.0, 163792], [54.0, 151275], [55.0, 149425], [56.0, 151138], [57.0, 157580], [58.0, 163338], [59.0, 156804], [60.0, 149081]]}, "94941e47-3cee-424d-a026-0e2aa777861b": {"status": "error", "info": "error - unable to read from stream socket: Resource temporarily unavailable", "finish": 1527941477.533852, "node": "cmp-001", "verbose": "end: {}\nstart:\n  connected: []\n  connecting_to:\n    host: 11.2.0.16\n    port: 5201\n  cookie: shaker-sdfzio-master-0.1527941447.48\n  system_info: 'Linux shaker-sdfzio-master-0 4.4.0-127-generic #153-Ubuntu SMP Sat\n    May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n    '\n  timestamp:\n    time: Sat, 02 Jun 2018 12:10:47 GMT\n    timesecs: 1527941447\n  version: iperf 3.0.11\n", "scenario": "OpenStack L3 East-West UDP", "traceback": "Traceback (most recent call last):\n  File \"/root/shaker/lib/python2.7/site-packages/shaker/engine/quorum.py\", line 95, in process_reply\n    reply = self.executors[agent_id].process_reply(message)\n  File \"/root/shaker/lib/python2.7/site-packages/shaker/engine/executors/iperf.py\", line 113, in process_reply\n    raise base.ExecutorException(result, data['error'])\nExecutorException: error - unable to read from stream socket: Resource temporarily unavailable\n", "schedule": 1527941447.460338, "id": "94941e47-3cee-424d-a026-0e2aa777861b", "start": 1527941447.480375, "command": {"type": "program", "data": "iperf3 --client 11.2.0.16 --format m --udp --len 32 --bandwidth 1000M --time 60 --parallel 1 --interval 1 --json"}, "agent": "shaker_sdfzio_master_0", "concurrency": 3, "executor": "iperf3", "test": "UDP", "stats": {}, "type": "agent", "stderr": ""}, "c0ce030c-ccdc-4f81-950a-70ccc9dfa1aa": {"status": "ok", "node": "cmp-004", "finish": 1527941427.448802, "stats": {"loss": {"avg": 3.18556, "unit": "%"}, "jitter": {"avg": 0.00328212, "unit": "ms"}, "packets": {"max": 157460, "avg": 150484, "unit": "pps", "min": 142139}}, "verbose": "end:\n  cpu_utilization_percent:\n    host_system: 35.8988\n    host_total: 43.6895\n    host_user: 7.78962\n    remote_system: 0.794174\n    remote_total: 0.917301\n    remote_user: 0.123143\n  streams:\n  - udp:\n      bits_per_second: 38523900.0\n      bytes: 288929440\n      end: 60.0001\n      jitter_ms: 0.00328212\n      lost_packets: 287626\n      lost_percent: 3.18556\n      packets: 9029044\n      seconds: 60.0001\n      socket: 4\n      start: 0\n  sum:\n    bits_per_second: 38523900.0\n    bytes: 288929440\n    end: 60.0001\n    jitter_ms: 0.00328212\n    lost_packets: 287626\n    lost_percent: 3.18556\n    packets: 9029044\n    seconds: 60.0001\n    start: 0\nstart:\n  connected:\n  - local_host: 11.1.0.8\n    local_port: 50699\n    remote_host: 11.2.0.9\n    remote_port: 5201\n    socket: 4\n  connecting_to:\n    host: 11.2.0.9\n    port: 5201\n  cookie: shaker-sdfzio-master-4.1527941367.27\n  system_info: 'Linux shaker-sdfzio-master-4 4.4.0-127-generic #153-Ubuntu SMP Sat\n    May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n    '\n  test_start:\n    blksize: 32\n    blocks: 0\n    bytes: 0\n    duration: 60\n    num_streams: 1\n    omit: 0\n    protocol: UDP\n    reverse: 0\n  timestamp:\n    time: Sat, 02 Jun 2018 12:09:27 GMT\n    timesecs: 1527941367\n  version: iperf 3.0.11\n", "scenario": "OpenStack L3 East-West UDP", "stderr": "", "schedule": 1527941367.262181, "agent": "shaker_sdfzio_master_4", "start": 1527941367.272294, "meta": [["time", "s"], ["packets", "pps"]], "command": {"type": "program", "data": "iperf3 --client 11.2.0.9 --format m --udp --len 32 --bandwidth 1000M --time 60 --parallel 1 --interval 1 --json"}, "concurrency": 1, "executor": "iperf3", "test": "UDP", "type": "agent", "id": "c0ce030c-ccdc-4f81-950a-70ccc9dfa1aa", "samples": [[1.0, 144620], [2.0, 147952], [3.0, 157100], [4.0, 144609], [5.0, 142139], [6.0, 143596], [7.0, 145175], [8.0, 145324], [9.0, 145143], [10.0, 144664], [11.0, 147728], [12.0, 155085], [13.0, 155056], [14.0, 154894], [15.0, 154347], [16.0, 154519], [17.0, 151975], [18.0, 142878], [19.0, 142886], [20.0, 142984], [21.0, 143012], [22.0, 151241], [23.0, 155514], [24.0, 155785], [25.0, 155823], [26.0, 156003], [27.0, 145451], [28.0, 144470], [29.0, 143668], [30.0, 143909], [31.0, 152337], [32.0, 156436], [33.0, 145591], [34.0, 144243], [35.0, 145187], [36.0, 145090], [37.0, 157460], [38.0, 157279], [39.0, 156984], [40.0, 155131], [41.0, 152719], [42.0, 150458], [43.0, 151876], [44.0, 151512], [45.0, 145986], [46.0, 151595], [47.0, 151916], [48.0, 151517], [49.0, 152041], [50.0, 152124], [51.0, 155709], [52.0, 156415], [53.0, 150647], [54.0, 155524], [55.0, 154807], [56.0, 155237], [57.0, 154855], [58.0, 150049], [59.0, 155201], [60.0, 155569]]}, "75f778a7-9f4b-470f-87cf-7f0c512970d7": {"stats": {"loss": {"avg": 85.56336000000002, "unit": "%"}, "jitter": {"avg": 0.036713592, "unit": "ms"}, "packets": {"max": 373501, "avg": 163756, "unit": "pps", "min": 133564}}, "scenario": "OpenStack L3 East-West UDP", "concurrency": 6, "test": "UDP", "type": "concurrency", "id": "75f778a7-9f4b-470f-87cf-7f0c512970d7", "node_chart": [["x", "cmp-003", "cmp-002", "cmp-005", "cmp-001", "cmp-006", "cmp-004"], ["Avg loss, %", 94.3492, 84.0475, 80.5092, 83.678, 85.2329], ["Avg jitter, ms", 0.05148, 0.02653, 0.00515946, 0.0262761, 0.0741224], ["Avg packets, pps", 213339, 153556, 153735, 153041, 145110], ["Max packets, pps", 372303, 368493, 373501, 216620, 157533], ["Min packets, pps", 147262, 133981, 137543, 139471, 133564]]}, "ec78b27a-48ee-4732-9ec4-54f192cb94ba": {"stats": {"loss": {"avg": 57.192049999999995, "unit": "%"}, "jitter": {"avg": 0.02601266, "unit": "ms"}, "packets": {"max": 170085, "avg": 156451, "unit": "pps", "min": 143004}}, "scenario": "OpenStack L3 East-West UDP", "concurrency": 3, "test": "UDP", "type": "concurrency", "id": "ec78b27a-48ee-4732-9ec4-54f192cb94ba", "node_chart": [["x", "cmp-003", "cmp-001", "cmp-004"], ["Avg loss, %", 57.2204, 57.1637], ["Avg jitter, ms", 0.0474204, 0.00460492], ["Avg packets, pps", 162275, 150628], ["Max packets, pps", 170085, 159752], ["Min packets, pps", 148856, 143004]]}, "31b1d818-a310-47be-8543-a90f3d54454e": {"status": "ok", "node": "cmp-004", "finish": 1527941507.844722, "stats": {"loss": {"avg": 57.1637, "unit": "%"}, "jitter": {"avg": 0.00460492, "unit": "ms"}, "packets": {"max": 159752, "avg": 150628, "unit": "pps", "min": 143004}}, "verbose": "end:\n  cpu_utilization_percent:\n    host_system: 35.2676\n    host_total: 43.6278\n    host_user: 8.3625\n    remote_system: 17.0566\n    remote_total: 19.7425\n    remote_user: 2.68424\n  streams:\n  - udp:\n      bits_per_second: 38560700.0\n      bytes: 289205824\n      end: 60.0001\n      jitter_ms: 0.00460492\n      lost_packets: 5166248\n      lost_percent: 57.1637\n      packets: 9037640\n      seconds: 60.0001\n      socket: 4\n      start: 0\n  sum:\n    bits_per_second: 38560700.0\n    bytes: 289205824\n    end: 60.0001\n    jitter_ms: 0.00460492\n    lost_packets: 5166248\n    lost_percent: 57.1637\n    packets: 9037640\n    seconds: 60.0001\n    start: 0\nstart:\n  connected:\n  - local_host: 11.1.0.8\n    local_port: 59562\n    remote_host: 11.2.0.9\n    remote_port: 5201\n    socket: 4\n  connecting_to:\n    host: 11.2.0.9\n    port: 5201\n  cookie: shaker-sdfzio-master-4.1527941447.47\n  system_info: 'Linux shaker-sdfzio-master-4 4.4.0-127-generic #153-Ubuntu SMP Sat\n    May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n    '\n  test_start:\n    blksize: 32\n    blocks: 0\n    bytes: 0\n    duration: 60\n    num_streams: 1\n    omit: 0\n    protocol: UDP\n    reverse: 0\n  timestamp:\n    time: Sat, 02 Jun 2018 12:10:47 GMT\n    timesecs: 1527941447\n  version: iperf 3.0.11\n", "scenario": "OpenStack L3 East-West UDP", "stderr": "", "schedule": 1527941447.460338, "agent": "shaker_sdfzio_master_4", "start": 1527941447.470433, "meta": [["time", "s"], ["packets", "pps"]], "command": {"type": "program", "data": "iperf3 --client 11.2.0.9 --format m --udp --len 32 --bandwidth 1000M --time 60 --parallel 1 --interval 1 --json"}, "concurrency": 3, "executor": "iperf3", "test": "UDP", "type": "agent", "id": "31b1d818-a310-47be-8543-a90f3d54454e", "samples": [[1.0, 155571], [2.0, 155978], [3.0, 148142], [4.0, 143004], [5.0, 145410], [6.0, 151901], [7.0, 152638], [8.0, 146114], [9.0, 144374], [10.0, 144247], [11.0, 144370], [12.0, 143433], [13.0, 144139], [14.0, 143856], [15.0, 143910], [16.0, 143643], [17.0, 144236], [18.0, 145332], [19.0, 144786], [20.0, 145253], [21.0, 149701], [22.0, 156824], [23.0, 156324], [24.0, 156832], [25.0, 158160], [26.0, 156658], [27.0, 157511], [28.0, 157272], [29.0, 157326], [30.0, 156580], [31.0, 150688], [32.0, 154473], [33.0, 153117], [34.0, 153468], [35.0, 153075], [36.0, 148550], [37.0, 146954], [38.0, 153508], [39.0, 152822], [40.0, 152659], [41.0, 153446], [42.0, 154128], [43.0, 159589], [44.0, 159752], [45.0, 155084], [46.0, 148048], [47.0, 156841], [48.0, 158625], [49.0, 151674], [50.0, 146291], [51.0, 145769], [52.0, 144652], [53.0, 145477], [54.0, 144419], [55.0, 143277], [56.0, 143550], [57.0, 144458], [58.0, 155073], [59.0, 157285], [60.0, 157405]]}, "c21bd1da-c7d3-422e-beb9-c60f913a2f40": {"status": "ok", "node": "cmp-004", "finish": 1527941595.000395, "stats": {"loss": {"avg": 85.2329, "unit": "%"}, "jitter": {"avg": 0.0741224, "unit": "ms"}, "packets": {"max": 157533, "avg": 145110, "unit": "pps", "min": 133564}}, "verbose": "end:\n  cpu_utilization_percent:\n    host_system: 34.8637\n    host_total: 42.5972\n    host_user: 7.73573\n    remote_system: 6.61039\n    remote_total: 7.59272\n    remote_user: 0.983364\n  streams:\n  - udp:\n      bits_per_second: 37148300.0\n      bytes: 278612352\n      end: 60.0001\n      jitter_ms: 0.0741224\n      lost_packets: 7420915\n      lost_percent: 85.2329\n      packets: 8706636\n      seconds: 60.0001\n      socket: 4\n      start: 0\n  sum:\n    bits_per_second: 37148300.0\n    bytes: 278612352\n    end: 60.0001\n    jitter_ms: 0.0741224\n    lost_packets: 7420915\n    lost_percent: 85.2329\n    packets: 8706636\n    seconds: 60.0001\n    start: 0\nstart:\n  connected:\n  - local_host: 11.1.0.8\n    local_port: 47208\n    remote_host: 11.2.0.9\n    remote_port: 5201\n    socket: 4\n  connecting_to:\n    host: 11.2.0.9\n    port: 5201\n  cookie: shaker-sdfzio-master-4.1527941527.87\n  system_info: 'Linux shaker-sdfzio-master-4 4.4.0-127-generic #153-Ubuntu SMP Sat\n    May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n    '\n  test_start:\n    blksize: 32\n    blocks: 0\n    bytes: 0\n    duration: 60\n    num_streams: 1\n    omit: 0\n    protocol: UDP\n    reverse: 0\n  timestamp:\n    time: Sat, 02 Jun 2018 12:12:07 GMT\n    timesecs: 1527941527\n  version: iperf 3.0.11\n", "scenario": "OpenStack L3 East-West UDP", "stderr": "", "schedule": 1527941527.854541, "agent": "shaker_sdfzio_master_4", "start": 1527941527.864631, "meta": [["time", "s"], ["packets", "pps"]], "command": {"type": "program", "data": "iperf3 --client 11.2.0.9 --format m --udp --len 32 --bandwidth 1000M --time 60 --parallel 1 --interval 1 --json"}, "concurrency": 6, "executor": "iperf3", "test": "UDP", "type": "agent", "id": "c21bd1da-c7d3-422e-beb9-c60f913a2f40", "samples": [[1.0, 154978], [2.0, 155119], [3.0, 155261], [4.0, 155181], [5.0, 155426], [6.0, 156054], [7.0, 155768], [8.0, 154105], [9.0, 153093], [10.0, 152718], [11.0, 153324], [12.0, 150453], [13.0, 148614], [14.0, 142738], [15.0, 144018], [16.0, 139259], [17.0, 143613], [18.0, 145686], [19.0, 137429], [20.0, 133976], [21.0, 134549], [22.0, 135436], [23.0, 136794], [24.0, 138044], [25.0, 138701], [26.0, 138402], [27.0, 141638], [28.0, 147208], [29.0, 145760], [30.0, 144769], [31.0, 148046], [32.0, 144739], [33.0, 141630], [34.0, 136878], [35.0, 133564], [36.0, 135765], [37.0, 143163], [38.0, 140773], [39.0, 141692], [40.0, 135129], [41.0, 134876], [42.0, 141563], [43.0, 144955], [44.0, 144687], [45.0, 138930], [46.0, 135924], [47.0, 135829], [48.0, 137024], [49.0, 142748], [50.0, 148483], [51.0, 146097], [52.0, 156716], [53.0, 157517], [54.0, 157533], [55.0, 157314], [56.0, 157105], [57.0, 155630], [58.0, 142428], [59.0, 141003], [60.0, 140781]]}}, "tests": {"UDP": {"udp": true, "title": "UDP", "datagram_size": 32, "interval": 1, "bandwidth": "1000M", "class": "iperf3"}}, "agents": {"shaker_sdfzio_master_4": {"node": "cmp-004", "slave": {"node": "cmp-008", "zone": "nova", "availability_zone": "nova:cmp-008", "ip": "11.2.0.9", "mode": "slave", "master_id": "shaker_sdfzio_master_4", "id": "shaker_sdfzio_slave_4"}, "zone": "nova", "availability_zone": "nova:cmp-004", "ip": "11.1.0.8", "mode": "master", "slave_id": "shaker_sdfzio_slave_4", "id": "shaker_sdfzio_master_4"}, "shaker_sdfzio_master_5": {"node": "cmp-003", "slave": {"node": "cmp-010", "zone": "nova", "availability_zone": "nova:cmp-010", "ip": "11.2.0.10", "mode": "slave", "master_id": "shaker_sdfzio_master_5", "id": "shaker_sdfzio_slave_5"}, "zone": "nova", "availability_zone": "nova:cmp-003", "ip": "11.1.0.10", "mode": "master", "slave_id": "shaker_sdfzio_slave_5", "id": "shaker_sdfzio_master_5"}, "shaker_sdfzio_master_0": {"node": "cmp-001", "slave": {"node": "cmp-011", "zone": "nova", "availability_zone": "nova:cmp-011", "ip": "11.2.0.16", "mode": "slave", "master_id": "shaker_sdfzio_master_0", "id": "shaker_sdfzio_slave_0"}, "zone": "nova", "availability_zone": "nova:cmp-001", "ip": "11.1.0.13", "mode": "master", "slave_id": "shaker_sdfzio_slave_0", "id": "shaker_sdfzio_master_0"}, "shaker_sdfzio_master_1": {"node": "cmp-002", "slave": {"node": "cmp-009", "zone": "nova", "availability_zone": "nova:cmp-009", "ip": "11.2.0.13", "mode": "slave", "master_id": "shaker_sdfzio_master_1", "id": "shaker_sdfzio_slave_1"}, "zone": "nova", "availability_zone": "nova:cmp-002", "ip": "11.1.0.11", "mode": "master", "slave_id": "shaker_sdfzio_slave_1", "id": "shaker_sdfzio_master_1"}, "shaker_sdfzio_master_2": {"node": "cmp-005", "slave": {"node": "cmp-012", "zone": "nova", "availability_zone": "nova:cmp-012", "ip": "11.2.0.8", "mode": "slave", "master_id": "shaker_sdfzio_master_2", "id": "shaker_sdfzio_slave_2"}, "zone": "nova", "availability_zone": "nova:cmp-005", "ip": "11.1.0.4", "mode": "master", "slave_id": "shaker_sdfzio_slave_2", "id": "shaker_sdfzio_master_2"}, "shaker_sdfzio_master_3": {"node": "cmp-006", "slave": {"node": "cmp-013", "zone": "nova", "availability_zone": "nova:cmp-013", "ip": "11.2.0.6", "mode": "slave", "master_id": "shaker_sdfzio_master_3", "id": "shaker_sdfzio_slave_3"}, "zone": "nova", "availability_zone": "nova:cmp-006", "ip": "11.1.0.9", "mode": "master", "slave_id": "shaker_sdfzio_slave_3", "id": "shaker_sdfzio_master_3"}, "shaker_sdfzio_slave_2": {"node": "cmp-012", "zone": "nova", "availability_zone": "nova:cmp-012", "ip": "11.2.0.8", "master": {"node": "cmp-005", "zone": "nova", "availability_zone": "nova:cmp-005", "ip": "11.1.0.4", "mode": "master", "slave_id": "shaker_sdfzio_slave_2", "id": "shaker_sdfzio_master_2"}, "mode": "slave", "master_id": "shaker_sdfzio_master_2", "id": "shaker_sdfzio_slave_2"}, "shaker_sdfzio_slave_3": {"node": "cmp-013", "zone": "nova", "availability_zone": "nova:cmp-013", "ip": "11.2.0.6", "master": {"node": "cmp-006", "zone": "nova", "availability_zone": "nova:cmp-006", "ip": "11.1.0.9", "mode": "master", "slave_id": "shaker_sdfzio_slave_3", "id": "shaker_sdfzio_master_3"}, "mode": "slave", "master_id": "shaker_sdfzio_master_3", "id": "shaker_sdfzio_slave_3"}, "shaker_sdfzio_slave_0": {"node": "cmp-011", "zone": "nova", "availability_zone": "nova:cmp-011", "ip": "11.2.0.16", "master": {"node": "cmp-001", "zone": "nova", "availability_zone": "nova:cmp-001", "ip": "11.1.0.13", "mode": "master", "slave_id": "shaker_sdfzio_slave_0", "id": "shaker_sdfzio_master_0"}, "mode": "slave", "master_id": "shaker_sdfzio_master_0", "id": "shaker_sdfzio_slave_0"}, "shaker_sdfzio_slave_1": {"node": "cmp-009", "zone": "nova", "availability_zone": "nova:cmp-009", "ip": "11.2.0.13", "master": {"node": "cmp-002", "zone": "nova", "availability_zone": "nova:cmp-002", "ip": "11.1.0.11", "mode": "master", "slave_id": "shaker_sdfzio_slave_1", "id": "shaker_sdfzio_master_1"}, "mode": "slave", "master_id": "shaker_sdfzio_master_1", "id": "shaker_sdfzio_slave_1"}, "shaker_sdfzio_slave_4": {"node": "cmp-008", "zone": "nova", "availability_zone": "nova:cmp-008", "ip": "11.2.0.9", "master": {"node": "cmp-004", "zone": "nova", "availability_zone": "nova:cmp-004", "ip": "11.1.0.8", "mode": "master", "slave_id": "shaker_sdfzio_slave_4", "id": "shaker_sdfzio_master_4"}, "mode": "slave", "master_id": "shaker_sdfzio_master_4", "id": "shaker_sdfzio_slave_4"}, "shaker_sdfzio_slave_5": {"node": "cmp-010", "zone": "nova", "availability_zone": "nova:cmp-010", "ip": "11.2.0.10", "master": {"node": "cmp-003", "zone": "nova", "availability_zone": "nova:cmp-003", "ip": "11.1.0.10", "mode": "master", "slave_id": "shaker_sdfzio_slave_5", "id": "shaker_sdfzio_master_5"}, "mode": "slave", "master_id": "shaker_sdfzio_master_5", "id": "shaker_sdfzio_slave_5"}}, "sla": []};
  </script>

  <script type="text/javascript">
    "use strict";

    $(function () {

      var fields = ["scenario", "test", "concurrency", "node", "agent"];
      var state = {
        scenario: "",
        test: "",
        concurrency: "",
        node: "",
        agent: ""
      };
      var tablePageSize = 10;

      // compiled templates
      var scenario_source_template = Handlebars.compile($("#scenario_source_template").html());
      var test_specification_template = Handlebars.compile($("#test_specification_template").html());
      var agents_table_template = Handlebars.compile($("#agents_table_template").html());
      var records_table_template = Handlebars.compile($("#records_table_template").html());
      var executor_template = Handlebars.compile($("#executor_template").html());
      var concurrency_summary_template = Handlebars.compile($("#concurrency_summary_template").html());
      var test_summary_template = Handlebars.compile($("#test_summary_template").html());
      var sla_table_template = Handlebars.compile($("#sla_table_template").html());
      var errors_template = Handlebars.compile($("#errors_template").html());

      function concatenate(strings) {
        // returns strings concatenated via comma (like join() but omits empty strings)
        var f = false;
        var result = "";
        $.each(strings, function (_i, string) {
          if (string.length > 0) {
            if (f) result += ", ";
            result += string;
            f = true;
          }
        });
        return result;
      }

      function initSingleSelector(name, values) {
        var selectorId = "#" + name + "_selector";

        var selector_inst = $(selectorId);
        selector_inst.empty();
        selector_inst.append($("<option>", {
          style: "font-style: italic; text-decoration: underline;",
          value: "",
          text: selector_inst.data('placeholder')
        }));

        $.each(values, function (key, item) {
          selector_inst.append($('<option>', {
            value: item, //(key + 1),
            text: item
          }));
        });

        selector_inst.val(state[name]);

        selector_inst.
            on("change", function (e) {
              state[name] = this.value;

              // convert state -> url
              var tokens = [];
              $.each(fields.sort(), function (i, field) {
                if (state[field] != "") {
                  tokens.push(field + "=" + state[field]);
                }
              });
              window.location.href = "#" + tokens.join(":");
            });
      }

      function getFieldValues(field, records) {
        var values_set = {};

        $.each(records, function (j, record) {
          if (record[field]) {
            values_set["" + record[field]] = true;
          }
        });

        return $.map(values_set, function (_i, value) {
          return value;
        }).sort();
      }

      function updateSelectors() {
        $.each(fields, function (i, field) {
          var values = getFieldValues(field, filterRecords(report.records, null, field));
          console.log(values);
          initSingleSelector(field, values);
        });
      }

      function filterRecords(records, type, except_field) {
        var res = [];
        $.each(records, function(_i, record){
          if (!type || typeof type === 'undefined' || record.type == type) {
            var flag = true;
            $.each(state, function (key, value) {
              if (key != except_field && value) {
                flag &= record[key] == value;
              }
            });
            if (flag) {
              res.push(record);
            }
          }
        });
        return res;
      }

      function getAgentsByIds(agent_ids) {
        var agents = [];
        $.each(agent_ids, function(agent_id){
          agents.push(report.agents[agent_id]);
        });
        return agents;
      }

      /* Template Rendering Funcs */

      function showScenarioSource(contentArea, scenario) {
        contentArea.append(scenario_source_template(
            {data: jsyaml.safeDump(scenario)}));
      }

      function showTestSpecification(contentArea, test) {
        contentArea.append(test_specification_template(
            {data: jsyaml.safeDump(test)}
        ))
      }

      function showAgentRecord(contentArea, record) {
        var chart_id = "chart_" + Math.round(Math.random() * 10000);
        var ext_options = {
          command_yaml: jsyaml.safeDump(record["command"]),
          chart_id: chart_id};
        if (record["stats"]) {
          ext_options["stats_yaml"] = jsyaml.safeDump(record["stats"]);
        }
        if ((record["start"]) && (record["finish"])) {
          ext_options["time_info"] = jsyaml.safeDump({
            "start": new Date(record["start"] * 1000).toISOString(),
            "finish": new Date(record["finish"] * 1000).toISOString()
          });
        }
        contentArea.append(executor_template(
            {record: $.extend({}, record, ext_options)}
        ));
        if (record["samples"]) {
          var meta = record["meta"];
          var axes = [];
          axes[meta[1][0]] = 'y';
          var axis = {
            x: {label: concatenate(meta[0])},
            y: {label: concatenate(meta[1]), min: 0}
          };
          if (meta.length > 2) {
            axes[meta[2][0]] = 'y2';
            axis['y2'] = {label: concatenate(meta[2]), min: 0, show: true}
          }

          var chart = [];
          $.each(meta, function(_i, meta_item){  // row titles
            chart.push([meta_item[0]]);
          });
          var samples = record["samples"];
          for (var i=0; i < samples.length; i++) {
            var point = samples[i];
            for (var j=0; j < point.length; j++) {
              chart[j].push(point[j]);
            }
          }

          c3.generate({
            bindto: "#" + chart_id,
            data: {
              x: 'time',
              columns: chart,
              axes: axes
            },
            axis: axis
          });
        }
      }

      function showConcurrencySummary(contentArea, record) {
        var chart_id = "chart_" + Math.round(Math.random() * 10000);
        var node_chart_id = "node_chart_" + Math.round(Math.random() * 10000);
        var ext_options = { chart_id: chart_id, node_chart_id: node_chart_id };
        if (record["stats"]) {
          ext_options["stats_yaml"] = jsyaml.safeDump(record["stats"]);
        }
        console.log(record);
        contentArea.append(concurrency_summary_template(
            {record: $.extend({}, record, ext_options)}
        ));
        if (record["node_chart"]) {
          c3.generate({
            bindto: "#" + node_chart_id,
            data: {
              x: 'x',
              columns: record["node_chart"],
              type: 'step',
              order: null
            },
            axis: {
              x: { type: 'category' }
            }
          });
        }
      }

      function showTestSummary(contentArea, record) {
        console.log(record);
        var chart_id = "chart_" + Math.round(Math.random() * 10000);
        var ext_options = { chart_id: chart_id };
        if (record["stats"]) {
          ext_options["stats_yaml"] = jsyaml.safeDump(record["stats"]);
        }
        contentArea.append(test_summary_template(
            {record: $.extend({}, record, ext_options)}
        ));
        if (record["chart"]) {
          var meta = record["meta"];
          var axes = [];
          axes[meta[1][0]] = 'y';
          var axis = {
            x: {label: concatenate(meta[0])},
            y: {label: concatenate(meta[1]), min: 0}
          };
          if (meta.length > 2) {
            axes[meta[2][0]] = 'y2';
            axis['y2'] = {label: concatenate(meta[2]), min: 0, show: true}
          }

          c3.generate({
            bindto: "#" + chart_id,
            data: {
              x: 'concurrency',
              columns: record["chart"],
              axes: axes
            },
            axis: axis
          });
        }
      }

      function showAgentsTable(contentArea, filteredRecords) {
        var agent_ids = {};
        $.each(filteredRecords, function(_i, record){
          if (record.agent) {
            agent_ids[record.agent] = true;
          }
        });

        var agents = getAgentsByIds(agent_ids);
        if (agents.length == 0) return;

        // add slave agents
        var slave_agent_ids = {};
        $.each(agents, function(_i, agent){
          if (agent.slave_id) {
            slave_agent_ids[agent.slave_id] = true;
          }
        });
        agents = $.merge(agents, getAgentsByIds(slave_agent_ids));

        contentArea.append(agents_table_template({
          agents: agents,
          table_id: "agents_table"
        }));
        $("#agents_table").dataTable({
          "autoWidth": true,
          "paging": false,
          "ordering": true,
          "info": false
        });
      }

      function makeURL(record, s) {
        var extra = {};
        extra[s] = record[s];
        return "#" + $.map($.extend({}, state, extra), function (val, index) {
          return val? (index + "=" + val) : null;
        }).join(":")
      }

      function showRecordsTable(contentArea, filteredRecords) {
        $.each(filteredRecords, function(_i, record) {
          $.each(fields, function(_j, field){
            if (record[field]) {
              record[field + "_url"] = makeURL(record, field);
            }
          });
        });

        contentArea.append(records_table_template({
          records: filteredRecords,
          table_id: "records_table"
        }));
        $("#records_table").dataTable({
          autoWidth: true,
          paging: filteredRecords.length > tablePageSize,
          ordering: true,
          info: false,
          searching: filteredRecords.length > tablePageSize
        });
      }

      function showSlaTable(contentArea, records) {
        if (records.length == 0) return;

        contentArea.append(sla_table_template({
          records: records,
          table_id: "sla_table"
        }));
        $("#records_table").dataTable({
          autoWidth: true,
          paging: records.length > tablePageSize,
          ordering: true,
          info: false,
          searching: records.length > tablePageSize
        });
      }

      function showErrors(contentArea, records) {
        if (records.length == 0) return;

        contentArea.append(errors_template({
          records: records,
          table_id: "errors_list"
        }));
      }

      /* Update cycle */

      function update() {
        var filteredRecords = filterRecords(report.records);
        console.log(filteredRecords);
        var slaRecords = [];
        var errorRecords = [];
        $.each(filterRecords(report.records), function(_i, record) {
          if (record["sla_info"]) {
            slaRecords.push(record);
          }
          if (record["is_status_error"]) {
            errorRecords.push(record);
          }
        });

        var contentArea = $("#content_area");
        contentArea.empty();

        updateSelectors();

        showRecordsTable(contentArea, filteredRecords);
        showSlaTable(contentArea, slaRecords);
        showErrors(contentArea, errorRecords);

        if (state["scenario"] != "" && state["test"] != "" &&
                state["concurrency"] != "" &&
                state["agent"] != "") {
          showAgentRecord(contentArea, filteredRecords[0]);
        }
        if (state["scenario"] != "" && state["test"] != "" &&
                state["concurrency"] != "" && state["node"] == "" &&
                state["agent"] == "") {
          var agg_recs = filterRecords(report.records, "concurrency");
          if (agg_recs.length > 0) {
            showConcurrencySummary(contentArea, agg_recs[0]);
          }
        }
        if (state["scenario"] != "" && state["test"] != "" &&
                state["concurrency"] == "" && state["node"] == "" &&
                state["agent"] == "") {
          var test_recs = filterRecords(report.records, "test");
          if (test_recs.length > 0) {
            showTestSummary(contentArea, test_recs[0]);
          }
        }
        if (state["test"] != "") {
          showTestSpecification(contentArea, report.tests[state["test"]]);
        }
        if (state["agent"] == "") {
          showAgentsTable(contentArea, filteredRecords);
        }
        if (state["scenario"] != "") {
          showScenarioSource(contentArea, report.scenarios[state["scenario"]]);
        }
      }

      function parseUrlToState() {
        var hashUrl = window.location.hash.substr(1);

        $.each(hashUrl.split(":"), function (_i, pair) {
          var kv = pair.split("=");
          if (kv.length == 2) {
            state[kv[0]] = decodeURIComponent(kv[1]);
          }
        });
      }

      // entry-point
      parseUrlToState();
      console.log(state);

      // pre-process records
      $.each(report.records, function(_i, record) {
        if (record.status) {
          record["is_status_ok"] = record.status == "ok";
          record["is_status_lost"] = record.status == "lost";
          record["is_status_interrupted"] = record.status == "interrupted";
          record["is_status_error"] = record.status == "error";
        }
      });

      // auto-select filters with 1 option
      $.each(fields, function(_i, field) {
        var values = getFieldValues(field, report.records);
        if (values.length == 1) {
          state[field] = values[0];
        }
      });

      update();

      $(window).on('hashchange', function() {
        parseUrlToState();
        update()
      });

      $('[data-toggle="tooltip"]').tooltip();
    });
  </script>

  <style type="text/css">
  </style>

</head>

<body>

<div class="container" id="container">
  <div class="row text-center">
    <h1>Shaker | The Report</h1>
  </div>
  <hr>
  <div class="row">
    <div class="col-md-2">
      <label for="scenario_selector" title="Scenario name">Scenario</label>
      <select id="scenario_selector" class="form-control" data-placeholder="- Any scenario -"></select>
    </div>
    <div class="col-md-2">
      <label for="test_selector" title="Test name">Test Case</label>
      <select id="test_selector" class="form-control" data-placeholder="- Any test case -"></select>
    </div>
    <div class="col-md-2">
      <label for="concurrency_selector" title="Concurrency">Concurrency</label>
      <select id="concurrency_selector" class="form-control" data-placeholder="- Any concurrency -"></select>
    </div>
    <div class="col-md-2">
      <label for="node_selector" title="Host / Compute node">Host</label>
      <select id="node_selector" class="form-control" data-placeholder="- Any node -"></select>
    </div>
    <div class="col-md-2">
      <label for="agent_selector" title="Agent">Agent</label>
      <select id="agent_selector" class="form-control" data-placeholder="- Any agent -"></select>
    </div>
  </div>

  <div id="content_area" class="row">
    <!-- Container for the screen content -->
  </div>

  <div id="footer" class="row">&nbsp;</div>
</div>

<!-- TEMPLATES --------------------------------------------------------------->

<!-- Scenario File -->
<script id="scenario_source_template" type="text/x-handlebars-template">
  <h3>Scenario</h3>
  <pre>{{ data }}</pre>
</script>

<!-- Test Specification -->
<script id="test_specification_template" type="text/x-handlebars-template">
  <h3>Test Specification</h3>
  <pre>{{ data }}</pre>
</script>

<!-- Executor Result -->
<script id="executor_template" type="text/x-handlebars-template">
  <h3>Execution Summary</h3>
  {{#with record}}
  <div id="{{ chart_id }}"></div>
  {{#if is_status_ok}}<span class="label label-success"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span>success</span>{{/if}}
  {{#if is_status_lost}}<span class="label label-danger"><span class="glyphicon glyphicon-alert" aria-hidden="true"></span>lost</span>{{/if}}
  {{#if is_status_interrupted}}<span class="label label-warning"><span class="glyphicon glyphicon-stop" aria-hidden="true"></span>interrupted</span>{{/if}}
  {{#if is_status_error}}<span class="label label-danger"><span class="glyphicon glyphicon-alert" aria-hidden="true"></span>error</span>{{/if}}
  {{#if stats_yaml}}
    <h4>Stats</h4>
    <pre>{{ stats_yaml }}</pre>
  {{/if}}
  {{#if time_info}}
    <h4>Time Info</h4>
    <pre>{{ time_info }}</pre>
  {{/if}}
  <h4>Command</h4>
  <pre>{{ command_yaml }}</pre>
  {{#if stdout}}
    <h4>Stdout</h4>
    <pre>{{ stdout }}</pre>
  {{/if}}
  {{#if verbose}}
    <h4>Verbose Info</h4>
    <pre>{{ verbose }}</pre>
  {{/if}}
  {{#if stderr}}
    <h4>Stderr</h4>
    <pre>{{ stderr }}</pre>
  {{/if}}
  {{/with}}
</script>

<!-- Concurrency summary -->
<script id="concurrency_summary_template" type="text/x-handlebars-template">
  {{#with record}}
  <div id="{{ chart_id  }}"></div>
  <h3>Per-node chart</h3>
  <div id="{{ node_chart_id  }}"></div>
  <h3>Stats</h3>
  <pre>{{ stats_yaml }}</pre>
  {{/with}}
</script>

<!-- Test summary -->
<script id="test_summary_template" type="text/x-handlebars-template">
  {{#with record}}
  <div id="{{ chart_id   }}"></div>
  {{#if stats_yaml}}
    <h3>Stats</h3>
    <pre>{{ stats_yaml }}</pre>
  {{/if}}
  {{/with}}
</script>

<!-- Records Table -->
<script id="records_table_template" type="text/x-handlebars-template">
  <h3>Records</h3>
  <table class="table table-striped" id="{{ table_id  }}">
    <thead>
    <tr>
      <th>Scenario</th>
      <th>Test Case</th>
      <th>Concurrency</th>
      <th>Host / Compute Node</th>
      <th>Agent</th>
      <th>Status</th>
    </tr>
    </thead>
    <tbody>
    {{#records}}
    <tr>
      <td><a href="{{ scenario_url }}">{{ scenario }}</a></td>
      <td><a href="{{ test_url }}">{{ test }}</a></td>
      <td><a href="{{ concurrency_url }}">{{ concurrency }}</a></td>
      <td><a href="{{ node_url }}">{{ node }}</a></td>
      <td><a href="{{ agent_url }}">{{ agent }}</a></td>
      <td>
        {{#if is_status_ok }}
          <span class="label label-success">
            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
            success
          </span>
        {{/if}}
        {{#if is_status_lost }}
          <span class="label label-danger">
            <span class="glyphicon glyphicon-alert" aria-hidden="true"></span>
            lost
          </span>
        {{/if}}
        {{#if is_status_interrupted }}
          <span class="label label-warning">
            <span class="glyphicon glyphicon-stop" aria-hidden="true"></span>
            interrupted
          </span>
        {{/if}}
        {{#if is_status_error }}
          <span class="label label-danger">
            <span class="glyphicon glyphicon-stop" aria-hidden="true"></span>
            error
          </span>
        {{/if}}
      </td>
    </tr>
    {{/records}}
    </tbody>
  </table>
</script>

<!-- Agents List -->
<script id="agents_table_template" type="text/x-handlebars-template">
  <h3>Agents</h3>
  <table class="table table-striped" id="{{ table_id }}">
    <thead>
    <tr>
      <th>Agent</th>
      <th>Mode</th>
      <th>IP</th>
      <th>Node</th>
      <th>AZ</th>
    </tr>
    </thead>
    <tbody>
    {{#agents}}
    <tr>
      <td>{{ id }}</td>
      <td>{{ mode }}</td>
      <td>{{ ip }}</td>
      <td>{{ node }}</td>
      <td>{{ zone }}</td>
    </tr>
    {{/agents}}
    </tbody>
  </table>
</script>

<!-- SLA List -->
<script id="sla_table_template" type="text/x-handlebars-template">
  <h3>Agents</h3>
  <table class="table table-striped" id="{{  table_id }}">
    <thead>
    <tr>
      <th>Condition</th>
      <th>Location</th>
      <th>Status</th>
    </tr>
    </thead>
    <tbody>
    {{#records}}
    <tr>
      <td>{{ sla }}</td>
      <td>{{ location }}</td>
      <td>
        {{#if is_status_ok }}
          <span class="text-success">
            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
            {{ status }}
          </span>
        {{else}}
          <span class="text-danger">
            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
            {{ status }}
          </span>
        {{/if}}
      </td>
    </tr>
    {{/records}}
    </tbody>
  </table>
</script>

<!-- Errors -->
<script id="errors_template" type="text/x-handlebars-template">
  <h3>Errors</h3>
  <div class="text-danger">
    <ul>
    {{#records}}
      <li>{{ info }}<br/>{{ stderr }}{{ traceback }}</li>
    {{/records}}
    </ul>
  </div>
</script>

</body>
</html>