<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
<head profile="http://gmpg.org/xfn/11">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>

  <title>Shaker | The distributed data-plane testing tool for OpenStack</title>

  <!-- LIBS -->

  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/js/bootstrap.js"></script>
  <script type="text/javascript"
          src="https://cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.1/handlebars.min.js"></script>
  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/3.2.7/js-yaml.min.js"></script>
  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.js"></script>

  <!-- STYLES -->

  <link rel="stylesheet"
        href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.4/simplex/bootstrap.min.css">
  <link rel=stylesheet type=text/css
        href="https://cdn.datatables.net/1.10.2/css/jquery.dataTables.min.css">
  <link rel=stylesheet type=text/css
        href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.css">
  <link rel='stylesheet' type='text/css'
        href='http://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic&subset=latin,cyrillic'>

  <script type="application/javascript">
    var report = {"scenarios": {"OpenStack L2 UDP": {"file_name": "/root/shaker/lib/python2.7/site-packages/shaker/scenarios/openstack/udp_l2.yaml", "deployment": {"accommodation": ["pair", "single_room"], "template": "l2.hot"}, "execution": {"tests": [{"class": "iperf3", "udp": true, "datagram_size": 32, "bandwidth": "1000M", "title": "UDP"}], "progression": "quadratic"}, "description": "In this scenario Shaker launches pairs of instances in the same tenant network. Every instance is hosted on a separate compute node. The traffic goes within the tenant network (L2 domain). The load is generated by UDP traffic.", "title": "OpenStack L2 UDP"}}, "records": {"0057f798-dadd-4f01-8202-7e728f7489ec": {"status": "ok", "node": "cmp-004", "finish": 1527850660.626483, "stats": {"loss": {"avg": 0.538447, "unit": "%"}, "jitter": {"avg": 0.00405811, "unit": "ms"}, "packets": {"max": 159390, "avg": 154883, "unit": "pps", "min": 145734}}, "verbose": "end:\n  cpu_utilization_percent:\n    host_system: 35.5553\n    host_total: 44.1873\n    host_user: 8.63581\n    remote_system: 12.1239\n    remote_total: 14.1303\n    remote_user: 2.00524\n  streams:\n  - udp:\n      bits_per_second: 39650200.0\n      bytes: 297376800\n      end: 60.0001\n      jitter_ms: 0.00405811\n      lost_packets: 50038\n      lost_percent: 0.538447\n      packets: 9293021\n      seconds: 60.0001\n      socket: 4\n      start: 0\n  sum:\n    bits_per_second: 39650200.0\n    bytes: 297376800\n    end: 60.0001\n    jitter_ms: 0.00405811\n    lost_packets: 50038\n    lost_percent: 0.538447\n    packets: 9293021\n    seconds: 60.0001\n    start: 0\nstart:\n  connected:\n  - local_host: 10.0.0.6\n    local_port: 35102\n    remote_host: 10.0.0.10\n    remote_port: 5201\n    socket: 4\n  connecting_to:\n    host: 10.0.0.10\n    port: 5201\n  cookie: shaker-fprsue-master-4.1527850600.47\n  system_info: 'Linux shaker-fprsue-master-4 4.4.0-127-generic #153-Ubuntu SMP Sat\n    May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n    '\n  test_start:\n    blksize: 32\n    blocks: 0\n    bytes: 0\n    duration: 60\n    num_streams: 1\n    omit: 0\n    protocol: UDP\n    reverse: 0\n  timestamp:\n    time: Fri, 01 Jun 2018 10:56:40 GMT\n    timesecs: 1527850600\n  version: iperf 3.0.11\n", "scenario": "OpenStack L2 UDP", "stderr": "", "schedule": 1527850600.448036, "agent": "shaker_fprsue_master_4", "start": 1527850600.467993, "meta": [["time", "s"], ["packets", "pps"]], "command": {"type": "program", "data": "iperf3 --client 10.0.0.10 --format m --udp --len 32 --bandwidth 1000M --time 60 --parallel 1 --interval 1 --json"}, "concurrency": 6, "executor": "iperf3", "test": "UDP", "type": "agent", "id": "0057f798-dadd-4f01-8202-7e728f7489ec", "samples": [[1.0, 156067], [2.0, 155681], [3.0, 155691], [4.0, 155557], [5.0, 155623], [6.0, 156830], [7.0, 156412], [8.0, 155607], [9.0, 156149], [10.0, 155830], [11.0, 158129], [12.0, 157760], [13.0, 157916], [14.0, 157384], [15.0, 157189], [16.0, 157435], [17.0, 159080], [18.0, 158789], [19.0, 158720], [20.0, 159215], [21.0, 159213], [22.0, 159235], [23.0, 159278], [24.0, 157927], [25.0, 157552], [26.0, 157637], [27.0, 155491], [28.0, 148676], [29.0, 152900], [30.0, 154433], [31.0, 159390], [32.0, 158792], [33.0, 152146], [34.0, 146204], [35.0, 145734], [36.0, 153389], [37.0, 153927], [38.0, 154531], [39.0, 155743], [40.0, 155594], [41.0, 153917], [42.0, 156856], [43.0, 157007], [44.0, 157583], [45.0, 159317], [46.0, 157214], [47.0, 156614], [48.0, 152535], [49.0, 152623], [50.0, 152547], [51.0, 151256], [52.0, 150225], [53.0, 150217], [54.0, 150368], [55.0, 150050], [56.0, 149853], [57.0, 148784], [58.0, 148467], [59.0, 148850], [60.0, 149886]]}, "79c77f06-ca0b-4019-a95c-9d0215a0b53a": {"stats": {"loss": {"avg": 0.4061598816666667, "unit": "%"}, "jitter": {"avg": 0.004402228333333333, "unit": "ms"}, "packets": {"max": 169419, "avg": 155044, "unit": "pps", "min": 128044}}, "scenario": "OpenStack L2 UDP", "concurrency": 6, "test": "UDP", "type": "concurrency", "id": "79c77f06-ca0b-4019-a95c-9d0215a0b53a", "node_chart": [["x", "cmp-004", "cmp-006", "cmp-001", "cmp-007", "cmp-005", "cmp-002"], ["Avg loss, %", 0.538447, 0.0502937, 0.45095, 0.00315729, 1.32692, 0.0671913], ["Avg jitter, ms", 0.00405811, 0.00359564, 0.00525557, 0.00547247, 0.00365268, 0.0043789], ["Avg packets, pps", 154883, 163440, 156514, 139887, 159895, 155650], ["Max packets, pps", 159390, 169419, 159785, 145313, 165848, 160555], ["Min packets, pps", 145734, 156673, 151667, 128044, 150624, 148470]]}, "d801daad-1437-4f72-9471-94514d0db6a8": {"status": "ok", "node": "cmp-006", "finish": 1527850660.630841, "stats": {"loss": {"avg": 0.0502937, "unit": "%"}, "jitter": {"avg": 0.00359564, "unit": "ms"}, "packets": {"max": 169419, "avg": 163440, "unit": "pps", "min": 156673}}, "verbose": "end:\n  cpu_utilization_percent:\n    host_system: 39.5749\n    host_total: 48.1306\n    host_user: 8.55547\n    remote_system: 11.961\n    remote_total: 13.9722\n    remote_user: 2.01102\n  streams:\n  - udp:\n      bits_per_second: 41840600.0\n      bytes: 313805120\n      end: 60.0001\n      jitter_ms: 0.00359564\n      lost_packets: 4932\n      lost_percent: 0.0502937\n      packets: 9806403\n      seconds: 60.0001\n      socket: 4\n      start: 0\n  sum:\n    bits_per_second: 41840600.0\n    bytes: 313805120\n    end: 60.0001\n    jitter_ms: 0.00359564\n    lost_packets: 4932\n    lost_percent: 0.0502937\n    packets: 9806403\n    seconds: 60.0001\n    start: 0\nstart:\n  connected:\n  - local_host: 10.0.0.17\n    local_port: 45565\n    remote_host: 10.0.0.9\n    remote_port: 5201\n    socket: 4\n  connecting_to:\n    host: 10.0.0.9\n    port: 5201\n  cookie: shaker-fprsue-master-3.1527850600.47\n  system_info: 'Linux shaker-fprsue-master-3 4.4.0-127-generic #153-Ubuntu SMP Sat\n    May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n    '\n  test_start:\n    blksize: 32\n    blocks: 0\n    bytes: 0\n    duration: 60\n    num_streams: 1\n    omit: 0\n    protocol: UDP\n    reverse: 0\n  timestamp:\n    time: Fri, 01 Jun 2018 10:56:40 GMT\n    timesecs: 1527850600\n  version: iperf 3.0.11\n", "scenario": "OpenStack L2 UDP", "stderr": "", "schedule": 1527850600.448036, "agent": "shaker_fprsue_master_3", "start": 1527850600.468033, "meta": [["time", "s"], ["packets", "pps"]], "command": {"type": "program", "data": "iperf3 --client 10.0.0.9 --format m --udp --len 32 --bandwidth 1000M --time 60 --parallel 1 --interval 1 --json"}, "concurrency": 6, "executor": "iperf3", "test": "UDP", "type": "agent", "id": "d801daad-1437-4f72-9471-94514d0db6a8", "samples": [[1.0, 159134], [2.0, 163953], [3.0, 158850], [4.0, 162096], [5.0, 160795], [6.0, 160130], [7.0, 160900], [8.0, 160868], [9.0, 161438], [10.0, 162312], [11.0, 165297], [12.0, 165481], [13.0, 164986], [14.0, 167731], [15.0, 166508], [16.0, 165690], [17.0, 166258], [18.0, 166404], [19.0, 166310], [20.0, 162036], [21.0, 164799], [22.0, 161938], [23.0, 161747], [24.0, 161678], [25.0, 161619], [26.0, 161692], [27.0, 161767], [28.0, 162480], [29.0, 164019], [30.0, 164727], [31.0, 165830], [32.0, 169419], [33.0, 168259], [34.0, 166300], [35.0, 166017], [36.0, 165645], [37.0, 165493], [38.0, 165116], [39.0, 163833], [40.0, 164859], [41.0, 164879], [42.0, 161567], [43.0, 160530], [44.0, 162729], [45.0, 164301], [46.0, 160886], [47.0, 161560], [48.0, 161947], [49.0, 162149], [50.0, 156673], [51.0, 160883], [52.0, 163434], [53.0, 168029], [54.0, 165850], [55.0, 164301], [56.0, 164124], [57.0, 164141], [58.0, 163961], [59.0, 160891], [60.0, 159161]]}, "f29498f3-ff57-4f31-a109-a47cd999b3e6": {"status": "ok", "node": "cmp-005", "finish": 1527850580.432215, "stats": {"loss": {"avg": 1.16106, "unit": "%"}, "jitter": {"avg": 0.00250126, "unit": "ms"}, "packets": {"max": 163954, "avg": 158566, "unit": "pps", "min": 152509}}, "verbose": "end:\n  cpu_utilization_percent:\n    host_system: 36.9045\n    host_total: 45.7094\n    host_user: 8.80169\n    remote_system: 17.4621\n    remote_total: 19.9859\n    remote_user: 2.52231\n  streams:\n  - udp:\n      bits_per_second: 40593000.0\n      bytes: 304447872\n      end: 60\n      jitter_ms: 0.00250126\n      lost_packets: 110463\n      lost_percent: 1.16106\n      packets: 9513996\n      seconds: 60\n      socket: 4\n      start: 0\n  sum:\n    bits_per_second: 40593000.0\n    bytes: 304447872\n    end: 60\n    jitter_ms: 0.00250126\n    lost_packets: 110463\n    lost_percent: 1.16106\n    packets: 9513996\n    seconds: 60\n    start: 0\nstart:\n  connected:\n  - local_host: 10.0.0.16\n    local_port: 43946\n    remote_host: 10.0.0.12\n    remote_port: 5201\n    socket: 4\n  connecting_to:\n    host: 10.0.0.12\n    port: 5201\n  cookie: shaker-fprsue-master-2.1527850520.26\n  system_info: 'Linux shaker-fprsue-master-2 4.4.0-127-generic #153-Ubuntu SMP Sat\n    May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n    '\n  test_start:\n    blksize: 32\n    blocks: 0\n    bytes: 0\n    duration: 60\n    num_streams: 1\n    omit: 0\n    protocol: UDP\n    reverse: 0\n  timestamp:\n    time: Fri, 01 Jun 2018 10:55:20 GMT\n    timesecs: 1527850520\n  version: iperf 3.0.11\n", "scenario": "OpenStack L2 UDP", "stderr": "", "schedule": 1527850520.239046, "agent": "shaker_fprsue_master_2", "start": 1527850520.258829, "meta": [["time", "s"], ["packets", "pps"]], "command": {"type": "program", "data": "iperf3 --client 10.0.0.12 --format m --udp --len 32 --bandwidth 1000M --time 60 --parallel 1 --interval 1 --json"}, "concurrency": 3, "executor": "iperf3", "test": "UDP", "type": "agent", "id": "f29498f3-ff57-4f31-a109-a47cd999b3e6", "samples": [[1.0, 158715], [2.0, 160905], [3.0, 159465], [4.0, 154677], [5.0, 155761], [6.0, 161285], [7.0, 160916], [8.0, 161824], [9.0, 154700], [10.0, 155498], [11.0, 155935], [12.0, 157315], [13.0, 157351], [14.0, 157856], [15.0, 158246], [16.0, 159144], [17.0, 158480], [18.0, 158376], [19.0, 158246], [20.0, 159545], [21.0, 163256], [22.0, 157751], [23.0, 156838], [24.0, 157169], [25.0, 156781], [26.0, 157156], [27.0, 158740], [28.0, 159243], [29.0, 159099], [30.0, 158962], [31.0, 158983], [32.0, 160772], [33.0, 163954], [34.0, 163779], [35.0, 163901], [36.0, 161565], [37.0, 158399], [38.0, 158510], [39.0, 159610], [40.0, 161368], [41.0, 162823], [42.0, 163108], [43.0, 163120], [44.0, 162969], [45.0, 162872], [46.0, 162626], [47.0, 158489], [48.0, 155493], [49.0, 155602], [50.0, 156967], [51.0, 157231], [52.0, 155441], [53.0, 154777], [54.0, 152962], [55.0, 152509], [56.0, 153388], [57.0, 154754], [58.0, 159081], [59.0, 154969], [60.0, 154739]]}, "07836e1b-21b6-4cfd-bb8a-7f3880b36c91": {"stats": {"loss": {"avg": 0.48803326666666663, "unit": "%"}, "jitter": {"avg": 0.003347883333333334, "unit": "ms"}, "packets": {"max": 163954, "avg": 157432, "unit": "pps", "min": 148891}}, "scenario": "OpenStack L2 UDP", "concurrency": 3, "test": "UDP", "type": "concurrency", "id": "07836e1b-21b6-4cfd-bb8a-7f3880b36c91", "node_chart": [["x", "cmp-005", "cmp-001", "cmp-002"], ["Avg loss, %", 1.16106, 0.286806, 0.0162338], ["Avg jitter, ms", 0.00250126, 0.00397778, 0.00356461], ["Avg packets, pps", 158566, 158190, 155540], ["Max packets, pps", 163954, 162511, 161683], ["Min packets, pps", 152509, 154217, 148891]]}, "630cb1ed-43ff-4e8b-9e16-715ea977481b": {"status": "ok", "node": "cmp-001", "finish": 1527850580.432927, "stats": {"loss": {"avg": 0.286806, "unit": "%"}, "jitter": {"avg": 0.00397778, "unit": "ms"}, "packets": {"max": 162511, "avg": 158190, "unit": "pps", "min": 154217}}, "verbose": "end:\n  cpu_utilization_percent:\n    host_system: 37.1389\n    host_total: 45.901\n    host_user: 8.76207\n    remote_system: 35.6907\n    remote_total: 42.164\n    remote_user: 6.47424\n  streams:\n  - udp:\n      bits_per_second: 40496700.0\n      bytes: 303725792\n      end: 60.0001\n      jitter_ms: 0.00397778\n      lost_packets: 27222\n      lost_percent: 0.286806\n      packets: 9491426\n      seconds: 60.0001\n      socket: 4\n      start: 0\n  sum:\n    bits_per_second: 40496700.0\n    bytes: 303725792\n    end: 60.0001\n    jitter_ms: 0.00397778\n    lost_packets: 27222\n    lost_percent: 0.286806\n    packets: 9491426\n    seconds: 60.0001\n    start: 0\nstart:\n  connected:\n  - local_host: 10.0.0.4\n    local_port: 48117\n    remote_host: 10.0.0.5\n    remote_port: 5201\n    socket: 4\n  connecting_to:\n    host: 10.0.0.5\n    port: 5201\n  cookie: shaker-fprsue-master-0.1527850520.25\n  system_info: 'Linux shaker-fprsue-master-0 4.4.0-127-generic #153-Ubuntu SMP Sat\n    May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n    '\n  test_start:\n    blksize: 32\n    blocks: 0\n    bytes: 0\n    duration: 60\n    num_streams: 1\n    omit: 0\n    protocol: UDP\n    reverse: 0\n  timestamp:\n    time: Fri, 01 Jun 2018 10:55:20 GMT\n    timesecs: 1527850520\n  version: iperf 3.0.11\n", "scenario": "OpenStack L2 UDP", "stderr": "", "schedule": 1527850520.239046, "agent": "shaker_fprsue_master_0", "start": 1527850520.249119, "meta": [["time", "s"], ["packets", "pps"]], "command": {"type": "program", "data": "iperf3 --client 10.0.0.5 --format m --udp --len 32 --bandwidth 1000M --time 60 --parallel 1 --interval 1 --json"}, "concurrency": 3, "executor": "iperf3", "test": "UDP", "type": "agent", "id": "630cb1ed-43ff-4e8b-9e16-715ea977481b", "samples": [[1.0, 159603], [2.0, 161044], [3.0, 162266], [4.0, 162011], [5.0, 161242], [6.0, 160024], [7.0, 156010], [8.0, 158242], [9.0, 158042], [10.0, 159245], [11.0, 160656], [12.0, 159883], [13.0, 159849], [14.0, 159873], [15.0, 161241], [16.0, 161848], [17.0, 161716], [18.0, 162511], [19.0, 162316], [20.0, 162466], [21.0, 161631], [22.0, 158554], [23.0, 156390], [24.0, 156185], [25.0, 156313], [26.0, 155699], [27.0, 155303], [28.0, 155057], [29.0, 155234], [30.0, 154812], [31.0, 155820], [32.0, 156748], [33.0, 160021], [34.0, 159822], [35.0, 159947], [36.0, 157526], [37.0, 157530], [38.0, 157919], [39.0, 158123], [40.0, 157742], [41.0, 158197], [42.0, 159658], [43.0, 158867], [44.0, 155829], [45.0, 156118], [46.0, 156141], [47.0, 156108], [48.0, 156025], [49.0, 155386], [50.0, 155706], [51.0, 155758], [52.0, 154693], [53.0, 154217], [54.0, 156392], [55.0, 158301], [56.0, 157917], [57.0, 158029], [58.0, 158032], [59.0, 156863], [60.0, 156730]]}, "7765b2aa-c726-4e7d-9504-874f9f08d0f6": {"meta": [["concurrency", ""], ["loss", "%"], ["jitter", "ms"], ["packets", "pps"]], "scenario": "OpenStack L2 UDP", "test": "UDP", "type": "test", "chart": [["concurrency", 1, 3, 6], ["loss", 5.65561, 0.48803326666666663, 0.4061598816666667], ["jitter", 0.00335279, 0.003347883333333334, 0.004402228333333333], ["packets", 177977, 157432, 155044]], "id": "7765b2aa-c726-4e7d-9504-874f9f08d0f6"}, "f23f16e2-3f22-4cbf-8b46-09b7b6f7b81e": {"status": "ok", "node": "cmp-001", "finish": 1527850660.624938, "stats": {"loss": {"avg": 0.45095, "unit": "%"}, "jitter": {"avg": 0.00525557, "unit": "ms"}, "packets": {"max": 159785, "avg": 156514, "unit": "pps", "min": 151667}}, "verbose": "end:\n  cpu_utilization_percent:\n    host_system: 36.6777\n    host_total: 45.327\n    host_user: 8.64845\n    remote_system: 36.1861\n    remote_total: 42.42\n    remote_user: 6.23743\n  streams:\n  - udp:\n      bits_per_second: 40067500.0\n      bytes: 300507040\n      end: 60.0001\n      jitter_ms: 0.00525557\n      lost_packets: 42348\n      lost_percent: 0.45095\n      packets: 9390843\n      seconds: 60.0001\n      socket: 4\n      start: 0\n  sum:\n    bits_per_second: 40067500.0\n    bytes: 300507040\n    end: 60.0001\n    jitter_ms: 0.00525557\n    lost_packets: 42348\n    lost_percent: 0.45095\n    packets: 9390843\n    seconds: 60.0001\n    start: 0\nstart:\n  connected:\n  - local_host: 10.0.0.4\n    local_port: 60839\n    remote_host: 10.0.0.5\n    remote_port: 5201\n    socket: 4\n  connecting_to:\n    host: 10.0.0.5\n    port: 5201\n  cookie: shaker-fprsue-master-0.1527850600.46\n  system_info: 'Linux shaker-fprsue-master-0 4.4.0-127-generic #153-Ubuntu SMP Sat\n    May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n    '\n  test_start:\n    blksize: 32\n    blocks: 0\n    bytes: 0\n    duration: 60\n    num_streams: 1\n    omit: 0\n    protocol: UDP\n    reverse: 0\n  timestamp:\n    time: Fri, 01 Jun 2018 10:56:40 GMT\n    timesecs: 1527850600\n  version: iperf 3.0.11\n", "scenario": "OpenStack L2 UDP", "stderr": "", "schedule": 1527850600.448036, "agent": "shaker_fprsue_master_0", "start": 1527850600.458123, "meta": [["time", "s"], ["packets", "pps"]], "command": {"type": "program", "data": "iperf3 --client 10.0.0.5 --format m --udp --len 32 --bandwidth 1000M --time 60 --parallel 1 --interval 1 --json"}, "concurrency": 6, "executor": "iperf3", "test": "UDP", "type": "agent", "id": "f23f16e2-3f22-4cbf-8b46-09b7b6f7b81e", "samples": [[1.0, 158528], [2.0, 157772], [3.0, 157399], [4.0, 157617], [5.0, 155491], [6.0, 155425], [7.0, 155207], [8.0, 155000], [9.0, 154896], [10.0, 155214], [11.0, 156873], [12.0, 158843], [13.0, 158906], [14.0, 158936], [15.0, 159209], [16.0, 158957], [17.0, 159080], [18.0, 158446], [19.0, 158514], [20.0, 158608], [21.0, 158501], [22.0, 156103], [23.0, 155068], [24.0, 154642], [25.0, 154968], [26.0, 152776], [27.0, 151667], [28.0, 152566], [29.0, 157555], [30.0, 157486], [31.0, 157649], [32.0, 156921], [33.0, 159785], [34.0, 158576], [35.0, 157541], [36.0, 158022], [37.0, 158444], [38.0, 158481], [39.0, 158120], [40.0, 158509], [41.0, 158563], [42.0, 159455], [43.0, 159284], [44.0, 156363], [45.0, 158331], [46.0, 154778], [47.0, 154973], [48.0, 154505], [49.0, 153931], [50.0, 154268], [51.0, 153887], [52.0, 154069], [53.0, 152217], [54.0, 155509], [55.0, 154931], [56.0, 155555], [57.0, 157789], [58.0, 153060], [59.0, 153468], [60.0, 153608]]}, "55243cea-0a99-4cb7-ac0c-be69a3d6952b": {"stats": {"loss": {"avg": 5.65561, "unit": "%"}, "jitter": {"avg": 0.00335279, "unit": "ms"}, "packets": {"max": 1986846, "avg": 177977, "unit": "pps", "min": 130005}}, "scenario": "OpenStack L2 UDP", "concurrency": 1, "test": "UDP", "type": "concurrency", "id": "55243cea-0a99-4cb7-ac0c-be69a3d6952b", "node_chart": [["x", "cmp-001"], ["Avg loss, %", 5.65561], ["Avg jitter, ms", 0.00335279], ["Avg packets, pps", 177977], ["Max packets, pps", 1986846], ["Min packets, pps", 130005]]}, "b3e7e14e-1ebe-471e-8bef-951b43bf9740": {"status": "ok", "node": "cmp-001", "finish": 1527850500.212613, "stats": {"loss": {"avg": 5.65561, "unit": "%"}, "jitter": {"avg": 0.00335279, "unit": "ms"}, "packets": {"max": 1986846, "avg": 177977, "unit": "pps", "min": 130005}}, "verbose": "end:\n  cpu_utilization_percent:\n    host_system: 43.7304\n    host_total: 53.6988\n    host_user: 9.96717\n    remote_system: 30.871\n    remote_total: 36.6998\n    remote_user: 5.82657\n  streams:\n  - udp:\n      bits_per_second: 45562300.0\n      bytes: 341717504\n      end: 60.0001\n      jitter_ms: 0.00335279\n      lost_packets: 603944\n      lost_percent: 5.65561\n      packets: 10678671\n      seconds: 60.0001\n      socket: 4\n      start: 0\n  sum:\n    bits_per_second: 45562300.0\n    bytes: 341717504\n    end: 60.0001\n    jitter_ms: 0.00335279\n    lost_packets: 603944\n    lost_percent: 5.65561\n    packets: 10678671\n    seconds: 60.0001\n    start: 0\nstart:\n  connected:\n  - local_host: 10.0.0.4\n    local_port: 35253\n    remote_host: 10.0.0.5\n    remote_port: 5201\n    socket: 4\n  connecting_to:\n    host: 10.0.0.5\n    port: 5201\n  cookie: shaker-fprsue-master-0.1527850440.05\n  system_info: 'Linux shaker-fprsue-master-0 4.4.0-127-generic #153-Ubuntu SMP Sat\n    May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n    '\n  test_start:\n    blksize: 32\n    blocks: 0\n    bytes: 0\n    duration: 60\n    num_streams: 1\n    omit: 0\n    protocol: UDP\n    reverse: 0\n  timestamp:\n    time: Fri, 01 Jun 2018 10:54:00 GMT\n    timesecs: 1527850440\n  version: iperf 3.0.11\n", "scenario": "OpenStack L2 UDP", "stderr": "", "schedule": 1527850433.064243, "agent": "shaker_fprsue_master_0", "start": 1527850440.053611, "meta": [["time", "s"], ["packets", "pps"]], "command": {"type": "program", "data": "iperf3 --client 10.0.0.5 --format m --udp --len 32 --bandwidth 1000M --time 60 --parallel 1 --interval 1 --json"}, "concurrency": 1, "executor": "iperf3", "test": "UDP", "type": "agent", "id": "b3e7e14e-1ebe-471e-8bef-951b43bf9740", "samples": [[1.0, 152475], [2.0, 138593], [3.0, 154613], [4.0, 158670], [5.0, 155519], [6.0, 157296], [7.0, 1986846], [8.0, 156177], [9.0, 150047], [10.0, 148362], [11.0, 150560], [12.0, 142822], [13.0, 139460], [14.0, 146915], [15.0, 145509], [16.0, 140841], [17.0, 142917], [18.0, 148703], [19.0, 145521], [20.0, 143740], [21.0, 145246], [22.0, 144067], [23.0, 146598], [24.0, 150009], [25.0, 149737], [26.0, 143306], [27.0, 154576], [28.0, 159854], [29.0, 158941], [30.0, 159070], [31.0, 152097], [32.0, 153746], [33.0, 149147], [34.0, 152929], [35.0, 152626], [36.0, 148533], [37.0, 147604], [38.0, 143621], [39.0, 143442], [40.0, 141501], [41.0, 141208], [42.0, 143068], [43.0, 149499], [44.0, 147337], [45.0, 154653], [46.0, 138374], [47.0, 130005], [48.0, 148890], [49.0, 144370], [50.0, 143468], [51.0, 147902], [52.0, 152495], [53.0, 136613], [54.0, 141854], [55.0, 136964], [56.0, 138403], [57.0, 138331], [58.0, 136989], [59.0, 148177], [60.0, 157836]]}, "f0901b42-636a-4135-99a9-3d4d0a65b8f1": {"status": "ok", "node": "cmp-002", "finish": 1527850580.421561, "stats": {"loss": {"avg": 0.0162338, "unit": "%"}, "jitter": {"avg": 0.00356461, "unit": "ms"}, "packets": {"max": 161683, "avg": 155540, "unit": "pps", "min": 148891}}, "verbose": "end:\n  cpu_utilization_percent:\n    host_system: 36.5068\n    host_total: 44.8835\n    host_user: 8.37599\n    remote_system: 15.2518\n    remote_total: 18.1742\n    remote_user: 2.92127\n  streams:\n  - udp:\n      bits_per_second: 39818200.0\n      bytes: 298636864\n      end: 60.0001\n      jitter_ms: 0.00356461\n      lost_packets: 1515\n      lost_percent: 0.0162338\n      packets: 9332400\n      seconds: 60.0001\n      socket: 4\n      start: 0\n  sum:\n    bits_per_second: 39818200.0\n    bytes: 298636864\n    end: 60.0001\n    jitter_ms: 0.00356461\n    lost_packets: 1515\n    lost_percent: 0.0162338\n    packets: 9332400\n    seconds: 60.0001\n    start: 0\nstart:\n  connected:\n  - local_host: 10.0.0.7\n    local_port: 45631\n    remote_host: 10.0.0.14\n    remote_port: 5201\n    socket: 4\n  connecting_to:\n    host: 10.0.0.14\n    port: 5201\n  cookie: shaker-fprsue-master-1.1527850520.26\n  system_info: 'Linux shaker-fprsue-master-1 4.4.0-127-generic #153-Ubuntu SMP Sat\n    May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n    '\n  test_start:\n    blksize: 32\n    blocks: 0\n    bytes: 0\n    duration: 60\n    num_streams: 1\n    omit: 0\n    protocol: UDP\n    reverse: 0\n  timestamp:\n    time: Fri, 01 Jun 2018 10:55:20 GMT\n    timesecs: 1527850520\n  version: iperf 3.0.11\n", "scenario": "OpenStack L2 UDP", "stderr": "", "schedule": 1527850520.239046, "agent": "shaker_fprsue_master_1", "start": 1527850520.258845, "meta": [["time", "s"], ["packets", "pps"]], "command": {"type": "program", "data": "iperf3 --client 10.0.0.14 --format m --udp --len 32 --bandwidth 1000M --time 60 --parallel 1 --interval 1 --json"}, "concurrency": 3, "executor": "iperf3", "test": "UDP", "type": "agent", "id": "f0901b42-636a-4135-99a9-3d4d0a65b8f1", "samples": [[1.0, 158346], [2.0, 159030], [3.0, 159378], [4.0, 148891], [5.0, 149183], [6.0, 153725], [7.0, 151545], [8.0, 152952], [9.0, 152629], [10.0, 152486], [11.0, 149174], [12.0, 154507], [13.0, 154735], [14.0, 155105], [15.0, 155253], [16.0, 153112], [17.0, 157281], [18.0, 157811], [19.0, 161683], [20.0, 160881], [21.0, 158940], [22.0, 159246], [23.0, 158089], [24.0, 157937], [25.0, 154801], [26.0, 158842], [27.0, 158782], [28.0, 157316], [29.0, 153305], [30.0, 152677], [31.0, 151958], [32.0, 155916], [33.0, 152970], [34.0, 156173], [35.0, 156526], [36.0, 153190], [37.0, 149829], [38.0, 150411], [39.0, 151835], [40.0, 159654], [41.0, 159527], [42.0, 158629], [43.0, 158543], [44.0, 158479], [45.0, 158373], [46.0, 158923], [47.0, 158383], [48.0, 158417], [49.0, 157543], [50.0, 158551], [51.0, 156922], [52.0, 151721], [53.0, 156671], [54.0, 156160], [55.0, 156405], [56.0, 156631], [57.0, 151386], [58.0, 151989], [59.0, 151622], [60.0, 151423]]}, "d7b5b128-35c2-41fd-9d8a-5eaadf61259f": {"status": "ok", "node": "cmp-007", "finish": 1527850660.630186, "stats": {"loss": {"avg": 0.00315729, "unit": "%"}, "jitter": {"avg": 0.00547247, "unit": "ms"}, "packets": {"max": 145313, "avg": 139887, "unit": "pps", "min": 128044}}, "verbose": "end:\n  cpu_utilization_percent:\n    host_system: 32.3455\n    host_total: 39.8212\n    host_user: 7.47715\n    remote_system: 10.3212\n    remote_total: 12.1837\n    remote_user: 1.8617\n  streams:\n  - udp:\n      bits_per_second: 35811300.0\n      bytes: 268584448\n      end: 60\n      jitter_ms: 0.00547247\n      lost_packets: 265\n      lost_percent: 0.00315729\n      packets: 8393262\n      seconds: 60\n      socket: 4\n      start: 0\n  sum:\n    bits_per_second: 35811300.0\n    bytes: 268584448\n    end: 60\n    jitter_ms: 0.00547247\n    lost_packets: 265\n    lost_percent: 0.00315729\n    packets: 8393262\n    seconds: 60\n    start: 0\nstart:\n  connected:\n  - local_host: 10.0.0.3\n    local_port: 56475\n    remote_host: 10.0.0.11\n    remote_port: 5201\n    socket: 4\n  connecting_to:\n    host: 10.0.0.11\n    port: 5201\n  cookie: shaker-fprsue-master-5.1527850600.47\n  system_info: 'Linux shaker-fprsue-master-5 4.4.0-127-generic #153-Ubuntu SMP Sat\n    May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n    '\n  test_start:\n    blksize: 32\n    blocks: 0\n    bytes: 0\n    duration: 60\n    num_streams: 1\n    omit: 0\n    protocol: UDP\n    reverse: 0\n  timestamp:\n    time: Fri, 01 Jun 2018 10:56:40 GMT\n    timesecs: 1527850600\n  version: iperf 3.0.11\n", "scenario": "OpenStack L2 UDP", "stderr": "", "schedule": 1527850600.448036, "agent": "shaker_fprsue_master_5", "start": 1527850600.467906, "meta": [["time", "s"], ["packets", "pps"]], "command": {"type": "program", "data": "iperf3 --client 10.0.0.11 --format m --udp --len 32 --bandwidth 1000M --time 60 --parallel 1 --interval 1 --json"}, "concurrency": 6, "executor": "iperf3", "test": "UDP", "type": "agent", "id": "d7b5b128-35c2-41fd-9d8a-5eaadf61259f", "samples": [[1.0, 141270], [2.0, 142083], [3.0, 142256], [4.0, 142279], [5.0, 141774], [6.0, 141303], [7.0, 141593], [8.0, 141307], [9.0, 141433], [10.0, 141141], [11.0, 144050], [12.0, 144068], [13.0, 143715], [14.0, 143795], [15.0, 143741], [16.0, 143977], [17.0, 143720], [18.0, 143932], [19.0, 144010], [20.0, 144882], [21.0, 144917], [22.0, 145313], [23.0, 145140], [24.0, 145110], [25.0, 144569], [26.0, 144398], [27.0, 144438], [28.0, 145006], [29.0, 143641], [30.0, 141595], [31.0, 139664], [32.0, 139197], [33.0, 139110], [34.0, 137825], [35.0, 138574], [36.0, 136258], [37.0, 133028], [38.0, 128044], [39.0, 129383], [40.0, 134042], [41.0, 132746], [42.0, 138525], [43.0, 134223], [44.0, 135646], [45.0, 138188], [46.0, 130733], [47.0, 136584], [48.0, 136660], [49.0, 132837], [50.0, 137793], [51.0, 142700], [52.0, 139115], [53.0, 135728], [54.0, 131461], [55.0, 139613], [56.0, 142142], [57.0, 139173], [58.0, 138738], [59.0, 137957], [60.0, 137121]]}, "9cab5bfe-b5e0-4aaa-bdee-4892b637d283": {"status": "ok", "node": "cmp-005", "finish": 1527850660.624093, "stats": {"loss": {"avg": 1.32692, "unit": "%"}, "jitter": {"avg": 0.00365268, "unit": "ms"}, "packets": {"max": 165848, "avg": 159895, "unit": "pps", "min": 150624}}, "verbose": "end:\n  cpu_utilization_percent:\n    host_system: 37.4457\n    host_total: 46.13\n    host_user: 8.68228\n    remote_system: 39.9642\n    remote_total: 45.5853\n    remote_user: 5.62145\n  streams:\n  - udp:\n      bits_per_second: 40933200.0\n      bytes: 306999488\n      end: 60.0001\n      jitter_ms: 0.00365268\n      lost_packets: 127301\n      lost_percent: 1.32692\n      packets: 9593728\n      seconds: 60.0001\n      socket: 4\n      start: 0\n  sum:\n    bits_per_second: 40933200.0\n    bytes: 306999488\n    end: 60.0001\n    jitter_ms: 0.00365268\n    lost_packets: 127301\n    lost_percent: 1.32692\n    packets: 9593728\n    seconds: 60.0001\n    start: 0\nstart:\n  connected:\n  - local_host: 10.0.0.16\n    local_port: 44130\n    remote_host: 10.0.0.12\n    remote_port: 5201\n    socket: 4\n  connecting_to:\n    host: 10.0.0.12\n    port: 5201\n  cookie: shaker-fprsue-master-2.1527850600.46\n  system_info: 'Linux shaker-fprsue-master-2 4.4.0-127-generic #153-Ubuntu SMP Sat\n    May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n    '\n  test_start:\n    blksize: 32\n    blocks: 0\n    bytes: 0\n    duration: 60\n    num_streams: 1\n    omit: 0\n    protocol: UDP\n    reverse: 0\n  timestamp:\n    time: Fri, 01 Jun 2018 10:56:40 GMT\n    timesecs: 1527850600\n  version: iperf 3.0.11\n", "scenario": "OpenStack L2 UDP", "stderr": "", "schedule": 1527850600.448036, "agent": "shaker_fprsue_master_2", "start": 1527850600.458093, "meta": [["time", "s"], ["packets", "pps"]], "command": {"type": "program", "data": "iperf3 --client 10.0.0.12 --format m --udp --len 32 --bandwidth 1000M --time 60 --parallel 1 --interval 1 --json"}, "concurrency": 6, "executor": "iperf3", "test": "UDP", "type": "agent", "id": "9cab5bfe-b5e0-4aaa-bdee-4892b637d283", "samples": [[1.0, 157518], [2.0, 156073], [3.0, 160036], [4.0, 160700], [5.0, 154961], [6.0, 153473], [7.0, 156522], [8.0, 156461], [9.0, 156602], [10.0, 160273], [11.0, 161606], [12.0, 157690], [13.0, 159242], [14.0, 160335], [15.0, 162443], [16.0, 162339], [17.0, 161296], [18.0, 160932], [19.0, 161414], [20.0, 162665], [21.0, 162795], [22.0, 163912], [23.0, 164579], [24.0, 161134], [25.0, 161517], [26.0, 161637], [27.0, 161793], [28.0, 165183], [29.0, 165848], [30.0, 163707], [31.0, 163586], [32.0, 159567], [33.0, 164318], [34.0, 160026], [35.0, 162609], [36.0, 161588], [37.0, 161579], [38.0, 161478], [39.0, 161671], [40.0, 161702], [41.0, 162007], [42.0, 162137], [43.0, 160736], [44.0, 161937], [45.0, 164008], [46.0, 162004], [47.0, 160409], [48.0, 156660], [49.0, 156610], [50.0, 158723], [51.0, 158935], [52.0, 158674], [53.0, 155343], [54.0, 153295], [55.0, 155128], [56.0, 152898], [57.0, 150624], [58.0, 157355], [59.0, 156190], [60.0, 157251]]}, "66aecfef-9f97-4408-ac13-35cb9844b851": {"status": "ok", "node": "cmp-002", "finish": 1527850660.617541, "stats": {"loss": {"avg": 0.0671913, "unit": "%"}, "jitter": {"avg": 0.0043789, "unit": "ms"}, "packets": {"max": 160555, "avg": 155650, "unit": "pps", "min": 148470}}, "verbose": "end:\n  cpu_utilization_percent:\n    host_system: 37.0058\n    host_total: 45.4505\n    host_user: 8.44248\n    remote_system: 33.3418\n    remote_total: 39.7566\n    remote_user: 6.41477\n  streams:\n  - udp:\n      bits_per_second: 39846400.0\n      bytes: 298848640\n      end: 60.0001\n      jitter_ms: 0.0043789\n      lost_packets: 6275\n      lost_percent: 0.0671913\n      packets: 9339013\n      seconds: 60.0001\n      socket: 4\n      start: 0\n  sum:\n    bits_per_second: 39846400.0\n    bytes: 298848640\n    end: 60.0001\n    jitter_ms: 0.0043789\n    lost_packets: 6275\n    lost_percent: 0.0671913\n    packets: 9339013\n    seconds: 60.0001\n    start: 0\nstart:\n  connected:\n  - local_host: 10.0.0.7\n    local_port: 53982\n    remote_host: 10.0.0.14\n    remote_port: 5201\n    socket: 4\n  connecting_to:\n    host: 10.0.0.14\n    port: 5201\n  cookie: shaker-fprsue-master-1.1527850600.46\n  system_info: 'Linux shaker-fprsue-master-1 4.4.0-127-generic #153-Ubuntu SMP Sat\n    May 19 10:58:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n\n    '\n  test_start:\n    blksize: 32\n    blocks: 0\n    bytes: 0\n    duration: 60\n    num_streams: 1\n    omit: 0\n    protocol: UDP\n    reverse: 0\n  timestamp:\n    time: Fri, 01 Jun 2018 10:56:40 GMT\n    timesecs: 1527850600\n  version: iperf 3.0.11\n", "scenario": "OpenStack L2 UDP", "stderr": "", "schedule": 1527850600.448036, "agent": "shaker_fprsue_master_1", "start": 1527850600.458139, "meta": [["time", "s"], ["packets", "pps"]], "command": {"type": "program", "data": "iperf3 --client 10.0.0.14 --format m --udp --len 32 --bandwidth 1000M --time 60 --parallel 1 --interval 1 --json"}, "concurrency": 6, "executor": "iperf3", "test": "UDP", "type": "agent", "id": "66aecfef-9f97-4408-ac13-35cb9844b851", "samples": [[1.0, 153685], [2.0, 151465], [3.0, 154185], [4.0, 153991], [5.0, 150907], [6.0, 153191], [7.0, 153594], [8.0, 148470], [9.0, 151680], [10.0, 155235], [11.0, 156976], [12.0, 160023], [13.0, 160555], [14.0, 159463], [15.0, 159253], [16.0, 158981], [17.0, 159578], [18.0, 158279], [19.0, 159495], [20.0, 156351], [21.0, 158249], [22.0, 157810], [23.0, 153174], [24.0, 157115], [25.0, 159088], [26.0, 158737], [27.0, 158081], [28.0, 158179], [29.0, 155950], [30.0, 156691], [31.0, 150686], [32.0, 155257], [33.0, 156149], [34.0, 151289], [35.0, 152774], [36.0, 152496], [37.0, 153349], [38.0, 153812], [39.0, 156963], [40.0, 155464], [41.0, 157447], [42.0, 157652], [43.0, 157320], [44.0, 159649], [45.0, 160017], [46.0, 156270], [47.0, 157596], [48.0, 155625], [49.0, 157765], [50.0, 157462], [51.0, 156136], [52.0, 153388], [53.0, 155302], [54.0, 155215], [55.0, 155784], [56.0, 152968], [57.0, 150981], [58.0, 150811], [59.0, 152691], [60.0, 152271]]}}, "tests": {"UDP": {"udp": true, "title": "UDP", "datagram_size": 32, "interval": 1, "bandwidth": "1000M", "class": "iperf3"}}, "agents": {"shaker_fprsue_master_0": {"node": "cmp-001", "slave": {"node": "cmp-011", "zone": "nova", "availability_zone": "nova:cmp-011", "ip": "10.0.0.5", "mode": "slave", "master_id": "shaker_fprsue_master_0", "id": "shaker_fprsue_slave_0"}, "zone": "nova", "availability_zone": "nova:cmp-001", "ip": "10.0.0.4", "mode": "master", "slave_id": "shaker_fprsue_slave_0", "id": "shaker_fprsue_master_0"}, "shaker_fprsue_master_1": {"node": "cmp-002", "slave": {"node": "cmp-009", "zone": "nova", "availability_zone": "nova:cmp-009", "ip": "10.0.0.14", "mode": "slave", "master_id": "shaker_fprsue_master_1", "id": "shaker_fprsue_slave_1"}, "zone": "nova", "availability_zone": "nova:cmp-002", "ip": "10.0.0.7", "mode": "master", "slave_id": "shaker_fprsue_slave_1", "id": "shaker_fprsue_master_1"}, "shaker_fprsue_master_2": {"node": "cmp-005", "slave": {"node": "cmp-012", "zone": "nova", "availability_zone": "nova:cmp-012", "ip": "10.0.0.12", "mode": "slave", "master_id": "shaker_fprsue_master_2", "id": "shaker_fprsue_slave_2"}, "zone": "nova", "availability_zone": "nova:cmp-005", "ip": "10.0.0.16", "mode": "master", "slave_id": "shaker_fprsue_slave_2", "id": "shaker_fprsue_master_2"}, "shaker_fprsue_master_3": {"node": "cmp-006", "slave": {"node": "cmp-013", "zone": "nova", "availability_zone": "nova:cmp-013", "ip": "10.0.0.9", "mode": "slave", "master_id": "shaker_fprsue_master_3", "id": "shaker_fprsue_slave_3"}, "zone": "nova", "availability_zone": "nova:cmp-006", "ip": "10.0.0.17", "mode": "master", "slave_id": "shaker_fprsue_slave_3", "id": "shaker_fprsue_master_3"}, "shaker_fprsue_master_4": {"node": "cmp-004", "slave": {"node": "cmp-008", "zone": "nova", "availability_zone": "nova:cmp-008", "ip": "10.0.0.10", "mode": "slave", "master_id": "shaker_fprsue_master_4", "id": "shaker_fprsue_slave_4"}, "zone": "nova", "availability_zone": "nova:cmp-004", "ip": "10.0.0.6", "mode": "master", "slave_id": "shaker_fprsue_slave_4", "id": "shaker_fprsue_master_4"}, "shaker_fprsue_master_5": {"node": "cmp-007", "slave": {"node": "cmp-003", "zone": "nova", "availability_zone": "nova:cmp-003", "ip": "10.0.0.11", "mode": "slave", "master_id": "shaker_fprsue_master_5", "id": "shaker_fprsue_slave_5"}, "zone": "nova", "availability_zone": "nova:cmp-007", "ip": "10.0.0.3", "mode": "master", "slave_id": "shaker_fprsue_slave_5", "id": "shaker_fprsue_master_5"}, "shaker_fprsue_slave_4": {"node": "cmp-008", "zone": "nova", "availability_zone": "nova:cmp-008", "ip": "10.0.0.10", "master": {"node": "cmp-004", "zone": "nova", "availability_zone": "nova:cmp-004", "ip": "10.0.0.6", "mode": "master", "slave_id": "shaker_fprsue_slave_4", "id": "shaker_fprsue_master_4"}, "mode": "slave", "master_id": "shaker_fprsue_master_4", "id": "shaker_fprsue_slave_4"}, "shaker_fprsue_slave_5": {"node": "cmp-003", "zone": "nova", "availability_zone": "nova:cmp-003", "ip": "10.0.0.11", "master": {"node": "cmp-007", "zone": "nova", "availability_zone": "nova:cmp-007", "ip": "10.0.0.3", "mode": "master", "slave_id": "shaker_fprsue_slave_5", "id": "shaker_fprsue_master_5"}, "mode": "slave", "master_id": "shaker_fprsue_master_5", "id": "shaker_fprsue_slave_5"}, "shaker_fprsue_slave_2": {"node": "cmp-012", "zone": "nova", "availability_zone": "nova:cmp-012", "ip": "10.0.0.12", "master": {"node": "cmp-005", "zone": "nova", "availability_zone": "nova:cmp-005", "ip": "10.0.0.16", "mode": "master", "slave_id": "shaker_fprsue_slave_2", "id": "shaker_fprsue_master_2"}, "mode": "slave", "master_id": "shaker_fprsue_master_2", "id": "shaker_fprsue_slave_2"}, "shaker_fprsue_slave_3": {"node": "cmp-013", "zone": "nova", "availability_zone": "nova:cmp-013", "ip": "10.0.0.9", "master": {"node": "cmp-006", "zone": "nova", "availability_zone": "nova:cmp-006", "ip": "10.0.0.17", "mode": "master", "slave_id": "shaker_fprsue_slave_3", "id": "shaker_fprsue_master_3"}, "mode": "slave", "master_id": "shaker_fprsue_master_3", "id": "shaker_fprsue_slave_3"}, "shaker_fprsue_slave_0": {"node": "cmp-011", "zone": "nova", "availability_zone": "nova:cmp-011", "ip": "10.0.0.5", "master": {"node": "cmp-001", "zone": "nova", "availability_zone": "nova:cmp-001", "ip": "10.0.0.4", "mode": "master", "slave_id": "shaker_fprsue_slave_0", "id": "shaker_fprsue_master_0"}, "mode": "slave", "master_id": "shaker_fprsue_master_0", "id": "shaker_fprsue_slave_0"}, "shaker_fprsue_slave_1": {"node": "cmp-009", "zone": "nova", "availability_zone": "nova:cmp-009", "ip": "10.0.0.14", "master": {"node": "cmp-002", "zone": "nova", "availability_zone": "nova:cmp-002", "ip": "10.0.0.7", "mode": "master", "slave_id": "shaker_fprsue_slave_1", "id": "shaker_fprsue_master_1"}, "mode": "slave", "master_id": "shaker_fprsue_master_1", "id": "shaker_fprsue_slave_1"}}, "sla": []};
  </script>

  <script type="text/javascript">
    "use strict";

    $(function () {

      var fields = ["scenario", "test", "concurrency", "node", "agent"];
      var state = {
        scenario: "",
        test: "",
        concurrency: "",
        node: "",
        agent: ""
      };
      var tablePageSize = 10;

      // compiled templates
      var scenario_source_template = Handlebars.compile($("#scenario_source_template").html());
      var test_specification_template = Handlebars.compile($("#test_specification_template").html());
      var agents_table_template = Handlebars.compile($("#agents_table_template").html());
      var records_table_template = Handlebars.compile($("#records_table_template").html());
      var executor_template = Handlebars.compile($("#executor_template").html());
      var concurrency_summary_template = Handlebars.compile($("#concurrency_summary_template").html());
      var test_summary_template = Handlebars.compile($("#test_summary_template").html());
      var sla_table_template = Handlebars.compile($("#sla_table_template").html());
      var errors_template = Handlebars.compile($("#errors_template").html());

      function concatenate(strings) {
        // returns strings concatenated via comma (like join() but omits empty strings)
        var f = false;
        var result = "";
        $.each(strings, function (_i, string) {
          if (string.length > 0) {
            if (f) result += ", ";
            result += string;
            f = true;
          }
        });
        return result;
      }

      function initSingleSelector(name, values) {
        var selectorId = "#" + name + "_selector";

        var selector_inst = $(selectorId);
        selector_inst.empty();
        selector_inst.append($("<option>", {
          style: "font-style: italic; text-decoration: underline;",
          value: "",
          text: selector_inst.data('placeholder')
        }));

        $.each(values, function (key, item) {
          selector_inst.append($('<option>', {
            value: item, //(key + 1),
            text: item
          }));
        });

        selector_inst.val(state[name]);

        selector_inst.
            on("change", function (e) {
              state[name] = this.value;

              // convert state -> url
              var tokens = [];
              $.each(fields.sort(), function (i, field) {
                if (state[field] != "") {
                  tokens.push(field + "=" + state[field]);
                }
              });
              window.location.href = "#" + tokens.join(":");
            });
      }

      function getFieldValues(field, records) {
        var values_set = {};

        $.each(records, function (j, record) {
          if (record[field]) {
            values_set["" + record[field]] = true;
          }
        });

        return $.map(values_set, function (_i, value) {
          return value;
        }).sort();
      }

      function updateSelectors() {
        $.each(fields, function (i, field) {
          var values = getFieldValues(field, filterRecords(report.records, null, field));
          console.log(values);
          initSingleSelector(field, values);
        });
      }

      function filterRecords(records, type, except_field) {
        var res = [];
        $.each(records, function(_i, record){
          if (!type || typeof type === 'undefined' || record.type == type) {
            var flag = true;
            $.each(state, function (key, value) {
              if (key != except_field && value) {
                flag &= record[key] == value;
              }
            });
            if (flag) {
              res.push(record);
            }
          }
        });
        return res;
      }

      function getAgentsByIds(agent_ids) {
        var agents = [];
        $.each(agent_ids, function(agent_id){
          agents.push(report.agents[agent_id]);
        });
        return agents;
      }

      /* Template Rendering Funcs */

      function showScenarioSource(contentArea, scenario) {
        contentArea.append(scenario_source_template(
            {data: jsyaml.safeDump(scenario)}));
      }

      function showTestSpecification(contentArea, test) {
        contentArea.append(test_specification_template(
            {data: jsyaml.safeDump(test)}
        ))
      }

      function showAgentRecord(contentArea, record) {
        var chart_id = "chart_" + Math.round(Math.random() * 10000);
        var ext_options = {
          command_yaml: jsyaml.safeDump(record["command"]),
          chart_id: chart_id};
        if (record["stats"]) {
          ext_options["stats_yaml"] = jsyaml.safeDump(record["stats"]);
        }
        if ((record["start"]) && (record["finish"])) {
          ext_options["time_info"] = jsyaml.safeDump({
            "start": new Date(record["start"] * 1000).toISOString(),
            "finish": new Date(record["finish"] * 1000).toISOString()
          });
        }
        contentArea.append(executor_template(
            {record: $.extend({}, record, ext_options)}
        ));
        if (record["samples"]) {
          var meta = record["meta"];
          var axes = [];
          axes[meta[1][0]] = 'y';
          var axis = {
            x: {label: concatenate(meta[0])},
            y: {label: concatenate(meta[1]), min: 0}
          };
          if (meta.length > 2) {
            axes[meta[2][0]] = 'y2';
            axis['y2'] = {label: concatenate(meta[2]), min: 0, show: true}
          }

          var chart = [];
          $.each(meta, function(_i, meta_item){  // row titles
            chart.push([meta_item[0]]);
          });
          var samples = record["samples"];
          for (var i=0; i < samples.length; i++) {
            var point = samples[i];
            for (var j=0; j < point.length; j++) {
              chart[j].push(point[j]);
            }
          }

          c3.generate({
            bindto: "#" + chart_id,
            data: {
              x: 'time',
              columns: chart,
              axes: axes
            },
            axis: axis
          });
        }
      }

      function showConcurrencySummary(contentArea, record) {
        var chart_id = "chart_" + Math.round(Math.random() * 10000);
        var node_chart_id = "node_chart_" + Math.round(Math.random() * 10000);
        var ext_options = { chart_id: chart_id, node_chart_id: node_chart_id };
        if (record["stats"]) {
          ext_options["stats_yaml"] = jsyaml.safeDump(record["stats"]);
        }
        console.log(record);
        contentArea.append(concurrency_summary_template(
            {record: $.extend({}, record, ext_options)}
        ));
        if (record["node_chart"]) {
          c3.generate({
            bindto: "#" + node_chart_id,
            data: {
              x: 'x',
              columns: record["node_chart"],
              type: 'step',
              order: null
            },
            axis: {
              x: { type: 'category' }
            }
          });
        }
      }

      function showTestSummary(contentArea, record) {
        console.log(record);
        var chart_id = "chart_" + Math.round(Math.random() * 10000);
        var ext_options = { chart_id: chart_id };
        if (record["stats"]) {
          ext_options["stats_yaml"] = jsyaml.safeDump(record["stats"]);
        }
        contentArea.append(test_summary_template(
            {record: $.extend({}, record, ext_options)}
        ));
        if (record["chart"]) {
          var meta = record["meta"];
          var axes = [];
          axes[meta[1][0]] = 'y';
          var axis = {
            x: {label: concatenate(meta[0])},
            y: {label: concatenate(meta[1]), min: 0}
          };
          if (meta.length > 2) {
            axes[meta[2][0]] = 'y2';
            axis['y2'] = {label: concatenate(meta[2]), min: 0, show: true}
          }

          c3.generate({
            bindto: "#" + chart_id,
            data: {
              x: 'concurrency',
              columns: record["chart"],
              axes: axes
            },
            axis: axis
          });
        }
      }

      function showAgentsTable(contentArea, filteredRecords) {
        var agent_ids = {};
        $.each(filteredRecords, function(_i, record){
          if (record.agent) {
            agent_ids[record.agent] = true;
          }
        });

        var agents = getAgentsByIds(agent_ids);
        if (agents.length == 0) return;

        // add slave agents
        var slave_agent_ids = {};
        $.each(agents, function(_i, agent){
          if (agent.slave_id) {
            slave_agent_ids[agent.slave_id] = true;
          }
        });
        agents = $.merge(agents, getAgentsByIds(slave_agent_ids));

        contentArea.append(agents_table_template({
          agents: agents,
          table_id: "agents_table"
        }));
        $("#agents_table").dataTable({
          "autoWidth": true,
          "paging": false,
          "ordering": true,
          "info": false
        });
      }

      function makeURL(record, s) {
        var extra = {};
        extra[s] = record[s];
        return "#" + $.map($.extend({}, state, extra), function (val, index) {
          return val? (index + "=" + val) : null;
        }).join(":")
      }

      function showRecordsTable(contentArea, filteredRecords) {
        $.each(filteredRecords, function(_i, record) {
          $.each(fields, function(_j, field){
            if (record[field]) {
              record[field + "_url"] = makeURL(record, field);
            }
          });
        });

        contentArea.append(records_table_template({
          records: filteredRecords,
          table_id: "records_table"
        }));
        $("#records_table").dataTable({
          autoWidth: true,
          paging: filteredRecords.length > tablePageSize,
          ordering: true,
          info: false,
          searching: filteredRecords.length > tablePageSize
        });
      }

      function showSlaTable(contentArea, records) {
        if (records.length == 0) return;

        contentArea.append(sla_table_template({
          records: records,
          table_id: "sla_table"
        }));
        $("#records_table").dataTable({
          autoWidth: true,
          paging: records.length > tablePageSize,
          ordering: true,
          info: false,
          searching: records.length > tablePageSize
        });
      }

      function showErrors(contentArea, records) {
        if (records.length == 0) return;

        contentArea.append(errors_template({
          records: records,
          table_id: "errors_list"
        }));
      }

      /* Update cycle */

      function update() {
        var filteredRecords = filterRecords(report.records);
        console.log(filteredRecords);
        var slaRecords = [];
        var errorRecords = [];
        $.each(filterRecords(report.records), function(_i, record) {
          if (record["sla_info"]) {
            slaRecords.push(record);
          }
          if (record["is_status_error"]) {
            errorRecords.push(record);
          }
        });

        var contentArea = $("#content_area");
        contentArea.empty();

        updateSelectors();

        showRecordsTable(contentArea, filteredRecords);
        showSlaTable(contentArea, slaRecords);
        showErrors(contentArea, errorRecords);

        if (state["scenario"] != "" && state["test"] != "" &&
                state["concurrency"] != "" &&
                state["agent"] != "") {
          showAgentRecord(contentArea, filteredRecords[0]);
        }
        if (state["scenario"] != "" && state["test"] != "" &&
                state["concurrency"] != "" && state["node"] == "" &&
                state["agent"] == "") {
          var agg_recs = filterRecords(report.records, "concurrency");
          if (agg_recs.length > 0) {
            showConcurrencySummary(contentArea, agg_recs[0]);
          }
        }
        if (state["scenario"] != "" && state["test"] != "" &&
                state["concurrency"] == "" && state["node"] == "" &&
                state["agent"] == "") {
          var test_recs = filterRecords(report.records, "test");
          if (test_recs.length > 0) {
            showTestSummary(contentArea, test_recs[0]);
          }
        }
        if (state["test"] != "") {
          showTestSpecification(contentArea, report.tests[state["test"]]);
        }
        if (state["agent"] == "") {
          showAgentsTable(contentArea, filteredRecords);
        }
        if (state["scenario"] != "") {
          showScenarioSource(contentArea, report.scenarios[state["scenario"]]);
        }
      }

      function parseUrlToState() {
        var hashUrl = window.location.hash.substr(1);

        $.each(hashUrl.split(":"), function (_i, pair) {
          var kv = pair.split("=");
          if (kv.length == 2) {
            state[kv[0]] = decodeURIComponent(kv[1]);
          }
        });
      }

      // entry-point
      parseUrlToState();
      console.log(state);

      // pre-process records
      $.each(report.records, function(_i, record) {
        if (record.status) {
          record["is_status_ok"] = record.status == "ok";
          record["is_status_lost"] = record.status == "lost";
          record["is_status_interrupted"] = record.status == "interrupted";
          record["is_status_error"] = record.status == "error";
        }
      });

      // auto-select filters with 1 option
      $.each(fields, function(_i, field) {
        var values = getFieldValues(field, report.records);
        if (values.length == 1) {
          state[field] = values[0];
        }
      });

      update();

      $(window).on('hashchange', function() {
        parseUrlToState();
        update()
      });

      $('[data-toggle="tooltip"]').tooltip();
    });
  </script>

  <style type="text/css">
  </style>

</head>

<body>

<div class="container" id="container">
  <div class="row text-center">
    <h1>Shaker | The Report</h1>
  </div>
  <hr>
  <div class="row">
    <div class="col-md-2">
      <label for="scenario_selector" title="Scenario name">Scenario</label>
      <select id="scenario_selector" class="form-control" data-placeholder="- Any scenario -"></select>
    </div>
    <div class="col-md-2">
      <label for="test_selector" title="Test name">Test Case</label>
      <select id="test_selector" class="form-control" data-placeholder="- Any test case -"></select>
    </div>
    <div class="col-md-2">
      <label for="concurrency_selector" title="Concurrency">Concurrency</label>
      <select id="concurrency_selector" class="form-control" data-placeholder="- Any concurrency -"></select>
    </div>
    <div class="col-md-2">
      <label for="node_selector" title="Host / Compute node">Host</label>
      <select id="node_selector" class="form-control" data-placeholder="- Any node -"></select>
    </div>
    <div class="col-md-2">
      <label for="agent_selector" title="Agent">Agent</label>
      <select id="agent_selector" class="form-control" data-placeholder="- Any agent -"></select>
    </div>
  </div>

  <div id="content_area" class="row">
    <!-- Container for the screen content -->
  </div>

  <div id="footer" class="row">&nbsp;</div>
</div>

<!-- TEMPLATES --------------------------------------------------------------->

<!-- Scenario File -->
<script id="scenario_source_template" type="text/x-handlebars-template">
  <h3>Scenario</h3>
  <pre>{{ data }}</pre>
</script>

<!-- Test Specification -->
<script id="test_specification_template" type="text/x-handlebars-template">
  <h3>Test Specification</h3>
  <pre>{{ data }}</pre>
</script>

<!-- Executor Result -->
<script id="executor_template" type="text/x-handlebars-template">
  <h3>Execution Summary</h3>
  {{#with record}}
  <div id="{{ chart_id }}"></div>
  {{#if is_status_ok}}<span class="label label-success"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span>success</span>{{/if}}
  {{#if is_status_lost}}<span class="label label-danger"><span class="glyphicon glyphicon-alert" aria-hidden="true"></span>lost</span>{{/if}}
  {{#if is_status_interrupted}}<span class="label label-warning"><span class="glyphicon glyphicon-stop" aria-hidden="true"></span>interrupted</span>{{/if}}
  {{#if is_status_error}}<span class="label label-danger"><span class="glyphicon glyphicon-alert" aria-hidden="true"></span>error</span>{{/if}}
  {{#if stats_yaml}}
    <h4>Stats</h4>
    <pre>{{ stats_yaml }}</pre>
  {{/if}}
  {{#if time_info}}
    <h4>Time Info</h4>
    <pre>{{ time_info }}</pre>
  {{/if}}
  <h4>Command</h4>
  <pre>{{ command_yaml }}</pre>
  {{#if stdout}}
    <h4>Stdout</h4>
    <pre>{{ stdout }}</pre>
  {{/if}}
  {{#if verbose}}
    <h4>Verbose Info</h4>
    <pre>{{ verbose }}</pre>
  {{/if}}
  {{#if stderr}}
    <h4>Stderr</h4>
    <pre>{{ stderr }}</pre>
  {{/if}}
  {{/with}}
</script>

<!-- Concurrency summary -->
<script id="concurrency_summary_template" type="text/x-handlebars-template">
  {{#with record}}
  <div id="{{ chart_id  }}"></div>
  <h3>Per-node chart</h3>
  <div id="{{ node_chart_id  }}"></div>
  <h3>Stats</h3>
  <pre>{{ stats_yaml }}</pre>
  {{/with}}
</script>

<!-- Test summary -->
<script id="test_summary_template" type="text/x-handlebars-template">
  {{#with record}}
  <div id="{{ chart_id   }}"></div>
  {{#if stats_yaml}}
    <h3>Stats</h3>
    <pre>{{ stats_yaml }}</pre>
  {{/if}}
  {{/with}}
</script>

<!-- Records Table -->
<script id="records_table_template" type="text/x-handlebars-template">
  <h3>Records</h3>
  <table class="table table-striped" id="{{ table_id  }}">
    <thead>
    <tr>
      <th>Scenario</th>
      <th>Test Case</th>
      <th>Concurrency</th>
      <th>Host / Compute Node</th>
      <th>Agent</th>
      <th>Status</th>
    </tr>
    </thead>
    <tbody>
    {{#records}}
    <tr>
      <td><a href="{{ scenario_url }}">{{ scenario }}</a></td>
      <td><a href="{{ test_url }}">{{ test }}</a></td>
      <td><a href="{{ concurrency_url }}">{{ concurrency }}</a></td>
      <td><a href="{{ node_url }}">{{ node }}</a></td>
      <td><a href="{{ agent_url }}">{{ agent }}</a></td>
      <td>
        {{#if is_status_ok }}
          <span class="label label-success">
            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
            success
          </span>
        {{/if}}
        {{#if is_status_lost }}
          <span class="label label-danger">
            <span class="glyphicon glyphicon-alert" aria-hidden="true"></span>
            lost
          </span>
        {{/if}}
        {{#if is_status_interrupted }}
          <span class="label label-warning">
            <span class="glyphicon glyphicon-stop" aria-hidden="true"></span>
            interrupted
          </span>
        {{/if}}
        {{#if is_status_error }}
          <span class="label label-danger">
            <span class="glyphicon glyphicon-stop" aria-hidden="true"></span>
            error
          </span>
        {{/if}}
      </td>
    </tr>
    {{/records}}
    </tbody>
  </table>
</script>

<!-- Agents List -->
<script id="agents_table_template" type="text/x-handlebars-template">
  <h3>Agents</h3>
  <table class="table table-striped" id="{{ table_id }}">
    <thead>
    <tr>
      <th>Agent</th>
      <th>Mode</th>
      <th>IP</th>
      <th>Node</th>
      <th>AZ</th>
    </tr>
    </thead>
    <tbody>
    {{#agents}}
    <tr>
      <td>{{ id }}</td>
      <td>{{ mode }}</td>
      <td>{{ ip }}</td>
      <td>{{ node }}</td>
      <td>{{ zone }}</td>
    </tr>
    {{/agents}}
    </tbody>
  </table>
</script>

<!-- SLA List -->
<script id="sla_table_template" type="text/x-handlebars-template">
  <h3>Agents</h3>
  <table class="table table-striped" id="{{  table_id }}">
    <thead>
    <tr>
      <th>Condition</th>
      <th>Location</th>
      <th>Status</th>
    </tr>
    </thead>
    <tbody>
    {{#records}}
    <tr>
      <td>{{ sla }}</td>
      <td>{{ location }}</td>
      <td>
        {{#if is_status_ok }}
          <span class="text-success">
            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
            {{ status }}
          </span>
        {{else}}
          <span class="text-danger">
            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
            {{ status }}
          </span>
        {{/if}}
      </td>
    </tr>
    {{/records}}
    </tbody>
  </table>
</script>

<!-- Errors -->
<script id="errors_template" type="text/x-handlebars-template">
  <h3>Errors</h3>
  <div class="text-danger">
    <ul>
    {{#records}}
      <li>{{ info }}<br/>{{ stderr }}{{ traceback }}</li>
    {{/records}}
    </ul>
  </div>
</script>

</body>
</html>